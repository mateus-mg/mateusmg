function mostrarErro(o){console.log("Mostrando mensagem de erro:",o);const e=document.querySelector(".projeto-conteudo"),t=document.getElementById("projeto-titulo");if(t&&(t.textContent="Erro"),e)e.innerHTML=`\n            <div class="projeto-erro">\n                <h2>Ocorreu um erro</h2>\n                <p>${o}</p>\n                <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n            </div>\n        `;else{const e=document.querySelector(".main-content");e&&(e.innerHTML=`\n                <h1 class="projeto-titulo-simples">Erro</h1>\n                <div class="projeto-conteudo">\n                    <div class="projeto-erro">\n                        <h2>Ocorreu um erro</h2>\n                        <p>${o}</p>\n                        <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n                    </div>\n                </div>\n            `)}}function carregarDetalhes(o,e){console.log(`Carregando detalhes do projeto ${o} no idioma ${e}`);const t=(new Date).getTime();fetch(`i18n/${e}.json?v=${t}`).then((o=>{if(!o.ok)throw new Error(`Erro ao carregar arquivo de tradu\xe7\xe3o: ${o.status}`);return o.json()})).then((t=>{if(!t.projetos||!t.projetos[o])return void mostrarErro(`Projeto n\xe3o encontrado no idioma ${e}`);const a=t.projetos[o];document.title=`${a.titulo} - Mateus Galv\xe3o`;const r=document.getElementById("projeto-titulo");r&&(r.textContent=a.titulo);const n=document.getElementById("projeto-descricao-curta");n&&(n.textContent=a.descricao);const i=document.getElementById("projeto-descricao-longa");i&&(a.descricao_longa?(i.innerHTML=a.descricao_longa,i.style.display="block"):i.style.display="none");const s=document.querySelector(".tags-container");s&&a.tecnologias&&Array.isArray(a.tecnologias)&&(s.innerHTML=a.tecnologias.map((o=>`<span class="portfolio-tag">${o}</span>`)).join(""));const c=document.getElementById("projeto-relatorio");if(c){const o=c.querySelector(".relatorio-conteudo");o&&(a.relatorio?(o.innerHTML=a.relatorio,c.style.display="block"):(o.innerHTML="\n                            <p>Relat\xf3rio detalhado em desenvolvimento.</p>\n                            <p>Este projeto est\xe1 sendo documentado e em breve teremos informa\xe7\xf5es mais detalhadas sobre seu desenvolvimento, desafios enfrentados e solu\xe7\xf5es implementadas.</p>\n                        ",c.style.display="block"))}const d=document.querySelector(".github-btn");d&&(d.href=`https://github.com/mateus-mg/${o}`),atualizarMetaTags(a.titulo,a.descricao),"undefined"!=typeof PubSub&&PubSub.publish("projeto:detalhesCarregados",{projetoId:o,idioma:e,titulo:a.titulo}),console.log("Detalhes do projeto carregados com sucesso")})).catch((t=>{console.error("Erro ao carregar detalhes do projeto:",t),mostrarErro(`Erro ao carregar as tradu\xe7\xf5es para ${e}. Por favor, tente novamente.`),"undefined"!=typeof PubSub&&PubSub.publish("projeto:erroCarregamento",{projetoId:o,idioma:e,erro:t.message})}))}function atualizarMetaTags(o,e){const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",e);const a=document.querySelector('meta[property="og:title"]');a&&a.setAttribute("content",`${o} - Mateus Galv\xe3o`);const r=document.querySelector('meta[property="og:description"]');r&&r.setAttribute("content",e),console.log("Meta tags atualizadas para SEO")}document.addEventListener("DOMContentLoaded",(function(){console.log("Inicializando p\xe1gina de detalhes do projeto");try{const o=new URLSearchParams(window.location.search||"").get("id");if(!o)return console.error("ID do projeto n\xe3o encontrado na URL"),void mostrarErro("Nenhum projeto especificado");console.log(`Carregando detalhes do projeto: ${o}`);let e="pt";try{if(void 0!==window.AppState&&null!==window.AppState)e=window.AppState.idiomaAtual||"pt",console.log("Utilizando idioma do AppState:",e);else{const o=localStorage.getItem("idioma"),t=sessionStorage.getItem("idioma");e=o||t||"pt",console.log("AppState n\xe3o dispon\xedvel, usando idioma de armazenamento local:",e)}}catch(o){console.error("Erro ao obter o idioma:",o)}const t=document.querySelector(".idioma-atual");t&&(t.textContent=e.toUpperCase()),document.querySelectorAll(".seletor-idioma").forEach((o=>{o.classList.remove("ativo"),o.getAttribute("data-idioma")===e&&o.classList.add("ativo")})),carregarDetalhes(o,e)}catch(o){console.error("Erro na inicializa\xe7\xe3o da p\xe1gina de detalhes:",o),mostrarErro("Ocorreu um erro ao carregar a p\xe1gina de detalhes")}const o=document.querySelector(".menu-idiomas-toggle"),e=document.querySelector(".menu-idiomas");o&&e&&(o.addEventListener("click",(function(){e.classList.toggle("ativo");const t=e.classList.contains("ativo");o.setAttribute("aria-expanded",t)})),document.addEventListener("click",(function(t){o.contains(t.target)||e.contains(t.target)||(e.classList.remove("ativo"),o.setAttribute("aria-expanded","false"))})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.classList.contains("ativo")&&(e.classList.remove("ativo"),o.setAttribute("aria-expanded","false"))}))),document.querySelectorAll(".seletor-idioma").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-idioma"),a=new URLSearchParams(window.location.search).get("id");try{"undefined"!=typeof AppState&&null!==AppState?(AppState.setIdiomaAtual(t),console.log("Idioma atualizado via AppState:",t)):(localStorage.setItem("idioma",t),sessionStorage.setItem("idioma",t),console.log("Idioma salvo em localStorage/sessionStorage:",t))}catch(o){console.error("Erro ao atualizar idioma:",o)}a?carregarDetalhes(a,t):console.warn("N\xe3o foi poss\xedvel recarregar detalhes: ID de projeto n\xe3o encontrado"),document.querySelectorAll(".seletor-idioma").forEach((o=>{o.classList.remove("ativo")})),this.classList.add("ativo");const r=document.querySelector(".idioma-atual");r&&(r.textContent=t.toUpperCase()),e&&e.classList.remove("ativo"),o&&o.setAttribute("aria-expanded","false")}))}));try{"undefined"!=typeof PubSub&&null!==PubSub&&PubSub.subscribe("idioma:alterado",(function(o){console.log(`P\xe1gina de detalhes recebeu notifica\xe7\xe3o de altera\xe7\xe3o de idioma: ${o.antigo} -> ${o.novo}`);const e=new URLSearchParams(window.location.search).get("id"),t=document.querySelector(".seletor-idioma.ativo")?.getAttribute("data-idioma");if(o.novo!==t){const t=document.querySelector(".idioma-atual");t&&(t.textContent=o.novo.toUpperCase()),document.querySelectorAll(".seletor-idioma").forEach((e=>{e.classList.remove("ativo"),e.getAttribute("data-idioma")===o.novo&&e.classList.add("ativo")})),e?carregarDetalhes(e,o.novo):console.warn("N\xe3o foi poss\xedvel recarregar detalhes: ID de projeto n\xe3o encontrado")}}))}catch(o){console.error("Erro ao configurar inscri\xe7\xe3o PubSub:",o)}const t=document.getElementById("btn-topo");t&&(window.addEventListener("scroll",(function(){window.scrollY>200?t.classList.add("mostrar"):t.classList.remove("mostrar")})),t.addEventListener("click",(function(o){o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})))}));
//# sourceMappingURL=script.js.map