!function(){window.lcpMonitoringActive=!0,window.ImageManager={verificarSuporteWebP:function(){return new Promise((e=>{const o=new Image;o.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",o.onload=o.onerror=function(){e(o.width>0&&o.height>0)}}))},configurarLazyLoading:function(){if(console.log("Configurando lazy loading de imagens"),"IntersectionObserver"in window){const e=new IntersectionObserver((o=>{o.forEach((o=>{if(o.isIntersecting){const a=o.target,n=a.getAttribute("data-src");n&&(a.src=n,a.removeAttribute("data-src")),e.unobserve(a)}}))}),{rootMargin:"50px",threshold:.1});document.querySelectorAll("img[data-src]").forEach((o=>{e.observe(o)}))}else document.querySelectorAll("img[data-src]").forEach((e=>{e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")}));console.log("Lazy loading configurado")},otimizarTodasImagens:async function(){console.log("Otimizando imagens"),await this.verificarSuporteWebP()?(console.log("Navegador suporta WebP, trocando formato de imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((e=>{const o=e.getAttribute("src");if(o&&(o.endsWith(".jpg")||o.endsWith(".jpeg")||o.endsWith(".png"))){const a=o.replace(/\.(jpg|jpeg|png)$/i,".webp");e.setAttribute("src",a),this.aplicarRedimensionamentoResponsivo(e)}}))):(console.log("Navegador n\xe3o suporta WebP, mantendo formato original das imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((e=>{this.aplicarRedimensionamentoResponsivo(e)})))},aplicarRedimensionamentoResponsivo:function(e){const o=e.parentElement.clientWidth;e.naturalWidth<100||e.src.includes("favicon")||(0!==o?e.naturalWidth>1.5*o&&(console.log(`Redimensionando imagem ${e.src} - tamanho atual: ${e.naturalWidth}px, cont\xeainer: ${o}px`),e.style.maxWidth="100%",!e.srcset)&&(e.src,e.sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",e.loading||(e.loading="lazy")):"complete"!==document.readyState&&window.addEventListener("load",(()=>{setTimeout((()=>this.aplicarRedimensionamentoResponsivo(e)),100)}),{once:!0}))},precarregarImagensCriticas:function(){["img/webp/header-bg.webp"].forEach((e=>{const o=document.createElement("link");o.rel="preload",o.as="image",o.href=e,document.head.appendChild(o)}))},carregarImagemFundo:function(){console.log("Carregando imagem de fundo do cabe\xe7alho");const e=document.querySelector("header");e&&e.classList.add("bg-loaded")},inicializar:function(){if("PerformanceObserver"in window)try{new PerformanceObserver((e=>{for(const o of e.getEntries())console.debug(`[Performance] ${o.name}: ${o.startTime.toFixed(0)}ms`)})).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){console.error("Erro ao configurar PerformanceObserver",e)}"requestIdleCallback"in window?requestIdleCallback((()=>{this.carregarImagemFundo(),setTimeout((()=>this.configurarLazyLoading()),100),setTimeout((()=>this.otimizarTodasImagens()),200)}),{timeout:1e3}):setTimeout((()=>{this.carregarImagemFundo(),setTimeout((()=>this.configurarLazyLoading()),100),setTimeout((()=>this.otimizarTodasImagens()),200)}),500)}};const e=()=>{const e=document.querySelector('header p[data-i18n="header.role"]');e&&(e.classList.add("lcp-priority"),e.classList.add("lcp-element"),e.setAttribute("fetchpriority","high"))};if("loading"===document.readyState?document.addEventListener("readystatechange",(()=>{"interactive"===document.readyState&&e()})):e(),"PerformanceObserver"in window){const e=new PerformanceObserver((o=>{const a=o.getEntries(),n=a[a.length-1];console.log("LCP:",n.startTime,n),window.ImageManager.inicializar(),e.disconnect()}));e.observe({type:"largest-contentful-paint",buffered:!0})}else setTimeout((()=>window.ImageManager.inicializar()),300)}(),document.addEventListener("DOMContentLoaded",(()=>{document.querySelector("header.bg-loaded")||(console.log("Inicializando gerenciador de imagens via DOMContentLoaded (fallback)"),window.ImageManager.inicializar())}));
//# sourceMappingURL=script.js.map