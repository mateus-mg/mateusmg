document.addEventListener("DOMContentLoaded",(function(){if(window.ImageManager)console.log("ImageManager j\xe1 est\xe1 dispon\xedvel, iniciando precarregamento"),e();else{console.log("Aguardando carregamento do optimizer.js");const o=setInterval((function(){window.ImageManager&&(clearInterval(o),console.log("ImageManager detectado, iniciando funcionalidades"),e())}),50);setTimeout((function(){window.ImageManager||(console.warn("ImageManager n\xe3o detectado ap\xf3s timeout, criando fallback"),window.ImageManager={precarregarImagensCriticas:function(){console.log("Fallback: Precarregando imagens cr\xedticas")},aplicarRedimensionamentoResponsivo:function(){console.log("Fallback: Tentativa de redimensionamento")}}),clearInterval(o),e()}),2e3)}function e(){window.ImageManager.precarregarImagensCriticas&&(console.log("Iniciando precarregamento de imagens cr\xedticas"),window.ImageManager.precarregarImagensCriticas()),window.ImageManager.aplicarRedimensionamentoResponsivo&&(console.log("Aplicando redimensionamento responsivo a todas as imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((e=>{e.complete?window.ImageManager.aplicarRedimensionamentoResponsivo(e):e.onload=function(){window.ImageManager.aplicarRedimensionamentoResponsivo(this)}})))}})),function(){window.lcpMonitoringActive=!0,window.ImageManager={verificarSuporteWebP:function(){return new Promise((e=>{const o=new Image;o.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",o.onload=o.onerror=function(){e(o.width>0&&o.height>0)}}))},configurarLazyLoading:function(){if(console.log("Configurando lazy loading de imagens"),"IntersectionObserver"in window){const e=new IntersectionObserver((o=>{o.forEach((o=>{if(o.isIntersecting){const t=o.target,a=t.getAttribute("data-src");a&&(t.src=a,t.removeAttribute("data-src")),e.unobserve(t)}}))}),{rootMargin:"50px",threshold:.1});document.querySelectorAll("img[data-src]").forEach((o=>{e.observe(o)}))}else document.querySelectorAll("img[data-src]").forEach((e=>{e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")}));console.log("Lazy loading configurado")},otimizarTodasImagens:async function(){console.log("Otimizando imagens"),await this.verificarSuporteWebP()?(console.log("Navegador suporta WebP, trocando formato de imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((e=>{const o=e.getAttribute("src");if(o&&(o.endsWith(".jpg")||o.endsWith(".jpeg")||o.endsWith(".png"))){const t=o.replace(/\.(jpg|jpeg|png)$/i,".webp");e.setAttribute("src",t),this.aplicarRedimensionamentoResponsivo(e)}}))):(console.log("Navegador n\xe3o suporta WebP, mantendo formato original das imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((e=>{this.aplicarRedimensionamentoResponsivo(e)})))},aplicarRedimensionamentoResponsivo:function(e){const o=e.parentElement.clientWidth;e.naturalWidth<100||e.src.includes("favicon")||(0!==o?e.naturalWidth>1.5*o&&(console.log(`Redimensionando imagem ${e.src} - tamanho atual: ${e.naturalWidth}px, cont\xeainer: ${o}px`),e.style.maxWidth="100%",!e.srcset)&&(e.src,e.sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",e.loading||(e.loading="lazy")):"complete"!==document.readyState&&window.addEventListener("load",(()=>{setTimeout((()=>this.aplicarRedimensionamentoResponsivo(e)),100)}),{once:!0}))},precarregarImagensCriticas:function(){["img/webp/header-bg.webp","img/webp/favicon.webp"].forEach((e=>{const o=document.createElement("link");o.rel="preload",o.as="image",o.href=e,document.head.appendChild(o)}))},carregarImagemFundo:function(){console.log("Carregando imagem de fundo do cabe\xe7alho");const e=document.querySelector("header");e&&e.classList.add("bg-loaded")},inicializar:function(){if("PerformanceObserver"in window)try{new PerformanceObserver((e=>{for(const o of e.getEntries())console.debug(`[Performance] ${o.name}: ${o.startTime.toFixed(0)}ms`)})).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){console.error("Erro ao configurar PerformanceObserver",e)}"requestIdleCallback"in window?requestIdleCallback((()=>{this.carregarImagemFundo(),setTimeout((()=>this.configurarLazyLoading()),100),setTimeout((()=>this.otimizarTodasImagens()),200)}),{timeout:1e3}):setTimeout((()=>{this.carregarImagemFundo(),setTimeout((()=>this.configurarLazyLoading()),100),setTimeout((()=>this.otimizarTodasImagens()),200)}),500)}};const e=()=>{const e=document.querySelector('header p[data-i18n="header.role"]');e&&(e.classList.add("lcp-priority"),e.classList.add("lcp-element"),e.setAttribute("fetchpriority","high"))};if("loading"===document.readyState?document.addEventListener("readystatechange",(()=>{"interactive"===document.readyState&&e()})):e(),"PerformanceObserver"in window){const e=new PerformanceObserver((o=>{const t=o.getEntries(),a=t[t.length-1];console.log("LCP:",a.startTime,a),window.ImageManager.inicializar(),e.disconnect()}));e.observe({type:"largest-contentful-paint",buffered:!0})}else setTimeout((()=>window.ImageManager.inicializar()),300)}(),document.addEventListener("DOMContentLoaded",(()=>{document.querySelector("header.bg-loaded")||(console.log("Inicializando gerenciador de imagens via DOMContentLoaded (fallback)"),window.ImageManager.inicializar())}));const domCache={sidebar:null,toggleButton:null,menuIdiomas:null,portfolioContainer:null,form:null};let idiomaAtualProjetos="pt";const CONFIG_CACHE={versao:"1.0.1",tempoExpiracaoCache:6048e5,prefixoChave:"portfolio_"};function initDOMCache(){domCache.sidebar=document.getElementById("sidebar"),domCache.toggleButton=document.getElementById("toggle-button"),domCache.menuIdiomas=document.querySelector(".menu-idiomas"),domCache.portfolioContainer=document.querySelector(".portfolio-container"),domCache.form=document.getElementById("formulario-contato")}function atualizarIconeSidebar(e){console.log("Atualizando \xedcone do sidebar para:",e?"X":"\u2630"),domCache.toggleButton&&(domCache.toggleButton.classList.add("trocando"),setTimeout((function(){domCache.toggleButton.innerHTML=e?'<span class="icone-menu entrando">\u2715</span>':'<span class="icone-menu entrando">\u2630</span>',setTimeout((function(){domCache.toggleButton.classList.remove("trocando")}),50)}),140))}window.carrosseis=window.carrosseis||{};const handlers={toggleSidebar:()=>{if(!domCache.sidebar)return;domCache.sidebar.classList.toggle("open");const e=domCache.sidebar.classList.contains("open");domCache.toggleButton.setAttribute("aria-expanded",e),domCache.sidebar.setAttribute("aria-label",e?"Menu de navega\xe7\xe3o aberto":"Menu de navega\xe7\xe3o fechado"),atualizarIconeSidebar(e);const o=document.getElementById("sidebar-overlay");o&&o.classList.toggle("ativo")},closeMenus:e=>{domCache.sidebar&&domCache.sidebar.classList.contains("open")&&(domCache.sidebar.contains(e.target)||domCache.toggleButton.contains(e.target)||handlers.toggleSidebar()),domCache.menuIdiomas&&domCache.menuIdiomas.classList.contains("ativo")&&(document.querySelector(".menu-idiomas-toggle").contains(e.target)||domCache.menuIdiomas.contains(e.target)||domCache.menuIdiomas.classList.remove("ativo"))},handleEscape:e=>{"Escape"===e.key&&(domCache.sidebar&&domCache.sidebar.classList.contains("open")&&handlers.toggleSidebar(),domCache.menuIdiomas&&domCache.menuIdiomas.classList.remove("ativo"))}};function criarOverlaySidebar(){console.log("Criando/verificando overlay do sidebar");let e=document.getElementById("sidebar-overlay");return e||(e=document.createElement("div"),e.id="sidebar-overlay",e.className="sidebar-overlay",document.body.appendChild(e),console.log("Overlay criado")),e.addEventListener("click",(function(){console.log("Overlay clicado - fechando sidebar"),domCache.sidebar&&(domCache.sidebar.classList.remove("open"),e.classList.remove("ativo"),domCache.toggleButton&&(domCache.toggleButton.setAttribute("aria-expanded","false"),domCache.toggleButton.innerHTML='<span class="icone-menu">\u2630</span>',domCache.toggleButton.classList.remove("menu-aberto")))})),e}function configurarSeletorIdiomas(){console.log("Configurando seletor de idiomas");const e=document.querySelector(".menu-idiomas-toggle"),o=document.querySelector(".menu-idiomas");e&&o?(e.addEventListener("click",(()=>{console.log("Bot\xe3o de idiomas clicado"),o.classList.toggle("ativo")})),document.addEventListener("click",(t=>{e.contains(t.target)||o.contains(t.target)||o.classList.remove("ativo")})),document.querySelectorAll(".menu-idiomas .seletor-idioma").forEach((e=>{e.addEventListener("click",(function(){const e=this.getAttribute("data-idioma");console.log("Idioma selecionado:",e),traduzirPagina(e),o.classList.remove("ativo")}))})),console.log("Seletor de idiomas configurado")):console.error("Elementos do seletor de idiomas n\xe3o encontrados")}function inicializarCarrosseis(){console.log("Inicializando carross\xe9is");const e=criarCarrossel({barraSeletor:".idioma-barra",btnAnteriorSeletor:".idiomas-carrossel .carrossel-btn.anterior",btnProximoSeletor:".idiomas-carrossel .carrossel-btn.proximo"}),o=criarCarrossel({barraSeletor:".skills-barra",btnAnteriorSeletor:".skills-carrossel .carrossel-btn.anterior",btnProximoSeletor:".skills-carrossel .carrossel-btn.proximo"});window.carrosseis.idiomas=e,window.carrosseis.skills=o,console.log("Carross\xe9is inicializados")}function criarCarrossel(e){console.log("Criando carrossel:",e.barraSeletor);const o=document.querySelectorAll(e.barraSeletor),t=document.querySelector(e.btnAnteriorSeletor),a=document.querySelector(e.btnProximoSeletor);let n=0;if(!o.length||!t||!a)return console.warn("Elementos do carrossel n\xe3o encontrados para:",e.barraSeletor),{mostrar:()=>{},getAtual:()=>0};function r(t){t<0&&(t=o.length-1),t>=o.length&&(t=0),n=t,o.forEach((e=>e.classList.remove("ativo"))),o[n].classList.add("ativo"),console.log(`Carrossel ${e.barraSeletor} mostrando \xedndice:`,n)}return t.addEventListener("click",(()=>{console.log(`Bot\xe3o anterior clicado em ${e.barraSeletor}`),r(n-1)})),a.addEventListener("click",(()=>{console.log(`Bot\xe3o pr\xf3ximo clicado em ${e.barraSeletor}`),r(n+1)})),{mostrar:r,getAtual:()=>n}}function configurarOutrosEventos(){console.log("Configurando outros eventos da UI"),domCache.sidebar&&domCache.sidebar.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(o=>{o.preventDefault(),domCache.sidebar.classList.remove("open"),document.getElementById("sidebar-overlay")?.classList.remove("ativo"),domCache.sidebar.setAttribute("aria-hidden",!0),domCache.toggleButton.setAttribute("aria-expanded",!1),domCache.toggleButton.innerHTML='<span class="icone-menu">\u2630</span>',domCache.toggleButton.classList.remove("menu-aberto");const t=e.getAttribute("href").substring(1),a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}))}));const e=document.getElementById("btn-topo");e&&(window.addEventListener("scroll",(()=>{window.scrollY>200?e.classList.add("mostrar"):e.classList.remove("mostrar"),atualizarMenuAtivo()})),e.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})));const o=document.querySelector(".botao.fale-comigo");o&&o.addEventListener("click",(function(e){e.preventDefault();const o=document.getElementById("contato");o&&o.scrollIntoView({behavior:"smooth"})}));const t=document.querySelector(".sobre-mim-btn");t&&t.addEventListener("click",(function(e){e.preventDefault();const o=document.getElementById("sobre");o&&o.scrollIntoView({behavior:"smooth"})}));const a=document.querySelector('.header-icons .icon-link[href="#contato"]');a&&a.addEventListener("click",(function(e){e.preventDefault();const o=document.getElementById("contato");o&&o.scrollIntoView({behavior:"smooth",block:"start"})}));const n=document.querySelector('.header-icons-bottom .icon-link[href="#contato"]');n&&n.addEventListener("click",(function(e){e.preventDefault();const o=document.getElementById("contato");o&&o.scrollIntoView({behavior:"smooth",block:"start"})})),console.log("Outros eventos da UI configurados")}function atualizarMenuAtivo(){const e=document.querySelectorAll("section"),o=document.querySelectorAll(".sidebar a");e.forEach((e=>{const t=e.offsetTop-100,a=e.getAttribute("id");window.scrollY>=t&&o.forEach((e=>{e.classList.remove("ativo"),e.getAttribute("href")===`#${a}`&&e.classList.add("ativo")}))}))}function iniciarAnimacaoSections(){console.log("Iniciando anima\xe7\xe3o das se\xe7\xf5es");const e=document.querySelectorAll("section");console.log(`Encontradas ${e.length} se\xe7\xf5es para animar`);const o=()=>{e.forEach((e=>{e.classList.add("visivel"),console.log(`Se\xe7\xe3o ${e.id||"sem ID"} marcada como vis\xedvel`)}))};if(!("IntersectionObserver"in window)||0===e.length)return console.log("Usando fallback para anima\xe7\xe3o das se\xe7\xf5es"),void o();try{const o=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("visivel"),console.log(`Se\xe7\xe3o ${e.target.id||"sem ID"} tornou-se vis\xedvel`),o.unobserve(e.target))}))}),{threshold:.1,rootMargin:"50px"});e.forEach((e=>{o.observe(e),console.log(`Observando se\xe7\xe3o ${e.id||"sem ID"}`)}))}catch(e){console.error("Erro ao configurar o IntersectionObserver:",e),o()}console.log("Anima\xe7\xe3o das se\xe7\xf5es inicializada")}function inicializarPortfolio(){if(console.log("Inicializando cards do portf\xf3lio"),!domCache.portfolioContainer)return void console.error("Container do portf\xf3lio n\xe3o encontrado");if("undefined"==typeof projetosPortfolio&&(console.log("Definindo array de projetos do portf\xf3lio"),window.projetosPortfolio={pt:[{id:"analise_vendas",titulo:"An\xe1lise de Vendas com Power BI",imagem:"img/vendas.jpg",alt:"Dashboard de vendas criado no Power BI mostrando gr\xe1ficos de faturamento, produtos e regi\xf5es",link:"https://github.com/mateus-mg/powerbi-vendas",descricao:"Dashboard interativo para an\xe1lise de vendas utilizando Power BI. Inclui segmenta\xe7\xe3o por per\xedodo, produtos e regi\xf5es, com insights visuais para tomada de decis\xe3o.",tecnologias:["Power BI","DAX","Visualiza\xe7\xe3o"]},{id:"previsao_casas",titulo:"Previs\xe3o de Pre\xe7os de Casas (Python)",imagem:"img/pre\xe7os-casas.jpg",alt:"Gr\xe1fico de dispers\xe3o de pre\xe7os de casas previsto por modelo de machine learning",link:"https://github.com/mateus-mg/house-prices-prediction",descricao:"Modelo de machine learning para prever pre\xe7os de casas com Python. Utiliza regress\xe3o, an\xe1lise explorat\xf3ria e valida\xe7\xe3o cruzada.",tecnologias:["Python","Pandas","Scikit-learn"]},{id:"dashboard_rh",titulo:"Dashboard de RH",imagem:"img/rh.jpg",alt:"Dashboard de RH com indicadores de turnover, absente\xedsmo e satisfa\xe7\xe3o dos colaboradores",link:"https://github.com/mateus-mg/dashboard-rh",descricao:"Visualiza\xe7\xe3o de indicadores de RH em dashboard din\xe2mico. Permite an\xe1lise de turnover, absente\xedsmo e satisfa\xe7\xe3o dos colaboradores.",tecnologias:["Power BI","Excel","RH"]}],en:[],es:[]}),!window.projetosPortfolio||!window.projetosPortfolio[idiomaAtualProjetos]||0===window.projetosPortfolio[idiomaAtualProjetos].length)return console.warn("Nenhum projeto encontrado para o idioma atual:",idiomaAtualProjetos),void(domCache.portfolioContainer.innerHTML='<p class="portfolio-sem-projetos">Nenhum projeto dispon\xedvel no momento.</p>');const e=()=>window.innerWidth<=768?1:window.innerWidth<=992?2:3;let o=e(),t=0,a=!1;function n(e="avan\xe7ar",n="navegacao"){if(!a){a=!0;try{domCache.portfolioContainer.classList.add("portfolio-transitioning"),domCache.portfolioContainer.classList.add(`portfolio-transitioning-${e}`),"navegacao"===n&&domCache.portfolioContainer.classList.add("portfolio-navegacao-ativa"),domCache.portfolioContainer.style.opacity="0","navegacao"===n&&(domCache.portfolioContainer.style.transform="avan\xe7ar"===e?"translateX(-5%)":"translateX(5%)"),setTimeout((()=>{try{domCache.portfolioContainer.innerHTML="";const i=window.projetosPortfolio[idiomaAtualProjetos],s=t*o,c=Math.min(s+o,i.length),l=i.slice(s,c);console.log(`Renderizando ${l.length} projetos (p\xe1gina ${t+1})`),l.forEach((e=>{const o=document.createElement("div");o.className="portfolio-card",o.setAttribute("data-id",e.id);const t=e.tecnologias.map((e=>`<span class="portfolio-tag">${e}</span>`)).join(""),a=e.imagem.replace(/\.(jpg|jpeg|png|gif)$/,"").replace("img/","img/webp/")+".webp",n=e.imagem,r=0===l.indexOf(e)?"high":"low",i=0===l.indexOf(e)?"eager":"lazy";o.innerHTML=`\n                            <div class="portfolio-image-container">\n                                <picture>\n                                    <source \n                                        srcset="${a}"\n                                        type="image/webp"\n                                        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"\n                                        fetchpriority="${r}">\n                                    <img \n                                        src="${n}" \n                                        alt="${e.alt}" \n                                        loading="${i}" \n                                        fetchpriority="${r}"\n                                        width="600"\n                                        height="400"\n                                        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"\n                                        class="portfolio-img">\n                                </picture>\n                            </div>\n                            <div class="portfolio-card-content">\n                                <h3 class="portfolio-title">${e.titulo}</h3>\n                                <p class="portfolio-desc">${e.descricao}</p>\n                                <div class="portfolio-tags">\n                                    ${t}\n                                </div>\n                                <div class="portfolio-buttons">\n                                    <a href="${e.link}" target="_blank" rel="noopener noreferrer" class="portfolio-btn">\n                                        <i class="fas fa-external-link-alt"></i> Ver GitHub\n                                    </a>\n                                    <a href="projeto.html?id=${e.id}" class="portfolio-btn relatorio-btn">\n                                        <i class="fas fa-file-alt"></i> Relat\xf3rio\n                                    </a>\n                                </div>\n                            </div>\n                        `;const s=o.querySelector("img");s&&window.ImageManager&&window.ImageManager.aplicarRedimensionamentoResponsivo&&(s.complete?setTimeout((()=>window.ImageManager.aplicarRedimensionamentoResponsivo(s)),100):s.onload=function(){setTimeout((()=>window.ImageManager.aplicarRedimensionamentoResponsivo(this)),100)}),domCache.portfolioContainer.appendChild(o)})),domCache.portfolioContainer.classList.remove("portfolio-transitioning"),domCache.portfolioContainer.classList.remove(`portfolio-transitioning-${e}`),domCache.portfolioContainer.classList.add(`portfolio-entering-${e}`),domCache.portfolioContainer.style.transform="navegacao"===n?"avan\xe7ar"===e?"translateX(5%)":"translateX(-5%)":"translateX(0)",setTimeout((()=>{try{domCache.portfolioContainer.style.opacity="1",domCache.portfolioContainer.style.transform="translateX(0)",r(),setTimeout((()=>{try{domCache.portfolioContainer.classList.remove(`portfolio-entering-${e}`),domCache.portfolioContainer.classList.remove("portfolio-navegacao-ativa"),a=!1}catch(e){console.error("Erro ao finalizar transi\xe7\xe3o:",e),a=!1}}),400)}catch(e){console.error("Erro durante a transi\xe7\xe3o de entrada:",e),a=!1}}),50)}catch(e){console.error("Erro durante a renderiza\xe7\xe3o dos cards:",e),domCache.portfolioContainer.style.opacity="1",a=!1,r()}}),400)}catch(e){console.error("Erro inicial na transi\xe7\xe3o:",e),a=!1}}}function r(){const e=Math.ceil(window.projetosPortfolio[idiomaAtualProjetos].length/o),r=document.querySelector(".portfolio-navegacao");if(r&&r.remove(),e<=1)return;const i=document.createElement("div");i.className="portfolio-navegacao";const s=document.createElement("button");s.className="portfolio-nav-btn anterior",s.innerHTML='<i class="fas fa-chevron-left"></i> Anterior',s.disabled=0===t,s.addEventListener("click",(()=>{console.log("Bot\xe3o anterior do portf\xf3lio clicado"),t>0&&!a&&(t--,n("voltar"))}));const c=document.createElement("button");c.className="portfolio-nav-btn proximo",c.innerHTML='Pr\xf3ximo <i class="fas fa-chevron-right"></i>',c.disabled=t>=e-1,c.addEventListener("click",(()=>{console.log("Bot\xe3o pr\xf3ximo do portf\xf3lio clicado"),t<e-1&&!a&&(t++,n("avan\xe7ar"))})),i.appendChild(s),i.appendChild(c),domCache.portfolioContainer.parentNode.insertBefore(i,domCache.portfolioContainer.nextSibling)}window.addEventListener("resize",(()=>{const a=e();if(a!==o){o=a;const e=window.projetosPortfolio[idiomaAtualProjetos],r=Math.ceil(e.length/o);t>=r&&(t=Math.max(0,r-1)),n("avan\xe7ar","redimensionamento")}})),n(),function(e){let r=0,i=0;e.addEventListener("touchstart",(e=>{r=e.changedTouches[0].screenX})),e.addEventListener("touchend",(e=>{i=e.changedTouches[0].screenX,i<r-50&&(()=>{const e=Math.ceil(window.projetosPortfolio[idiomaAtualProjetos].length/o);t<e-1&&!a&&(t++,n("avan\xe7ar"))})(),i>r+50&&t>0&&!a&&(t--,n("voltar"))}))}(domCache.portfolioContainer),window.renderizarPortfolio=n,console.log("Inicializa\xe7\xe3o do portf\xf3lio conclu\xedda")}function traduzirPagina(e){console.log("Traduzindo p\xe1gina para:",e),localStorage.setItem("idioma",e),localStorage.setItem("idioma_versao",CONFIG_CACHE.versao),localStorage.setItem("idioma_data",Date.now().toString()),idiomaAtualProjetos=e;const o=`${CONFIG_CACHE.prefixoChave}traducao_${e}`,t=`${CONFIG_CACHE.prefixoChave}traducao_versao_${e}`,a=`${CONFIG_CACHE.prefixoChave}traducao_data_${e}`,n=localStorage.getItem(t),r=localStorage.getItem(a),i=localStorage.getItem(o);if(n===CONFIG_CACHE.versao&&r&&Date.now()-parseInt(r)<CONFIG_CACHE.tempoExpiracaoCache&&i){console.log(`Usando tradu\xe7\xf5es em cache para o idioma ${e} (vers\xe3o ${n})`);try{return void aplicarTraducoes(JSON.parse(i),e)}catch(e){console.error("Erro ao processar cache de tradu\xe7\xf5es:",e)}}console.log(`Buscando tradu\xe7\xf5es do servidor para o idioma ${e}`),fetch(`i18n/${e}.json`).then((e=>{if(!e.ok)throw new Error(`Erro ao carregar arquivo de tradu\xe7\xe3o: ${e.status}`);return e.json()})).then((n=>{console.log("Arquivo de tradu\xe7\xe3o carregado com sucesso:",e);try{localStorage.setItem(o,JSON.stringify(n)),localStorage.setItem(t,CONFIG_CACHE.versao),localStorage.setItem(a,Date.now().toString()),console.log(`Tradu\xe7\xf5es para ${e} armazenadas em cache (vers\xe3o ${CONFIG_CACHE.versao})`)}catch(e){console.error("Erro ao salvar tradu\xe7\xf5es em cache:",e),limparCacheAntigo()}aplicarTraducoes(n,e)})).catch((o=>{console.error("Erro ao traduzir a p\xe1gina:",o),alert(`Erro ao carregar as tradu\xe7\xf5es para ${e}. Por favor, tente novamente.`)}))}function limparCacheAntigo(){console.log("Limpando cache antigo para liberar espa\xe7o");try{const e=[],o=`${CONFIG_CACHE.prefixoChave}traducao_`;for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);if(a&&a.startsWith(o)){const t=a.replace(o,"").split("_")[0],n=localStorage.getItem(`${CONFIG_CACHE.prefixoChave}traducao_data_${t}`);e.push({chave:a,idioma:t,data:n?parseInt(n):0})}}e.sort(((e,o)=>e.data-o.data));const t=Math.ceil(e.length/2);for(let o=0;o<t&&o<e.length;o++){const t=e[o];localStorage.removeItem(t.chave),localStorage.removeItem(`${CONFIG_CACHE.prefixoChave}traducao_versao_${t.idioma}`),localStorage.removeItem(`${CONFIG_CACHE.prefixoChave}traducao_data_${t.idioma}`),console.log(`Cache removido: ${t.chave}`)}console.log(`${t} itens de cache antigos removidos`)}catch(e){console.error("Erro ao limpar cache:",e)}}function aplicarTraducoes(e,o){document.title=e.tituloDocumento;const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",e.metaDescricao);const a=document.querySelectorAll("nav.sidebar a");a.length>0&&(a[0].textContent=e.nav.sobreMim,a[1].textContent=e.nav.experiencias,a[2].textContent=e.nav.portfolio,a[3].textContent=e.nav.servicos,a[4].textContent=e.nav.contato);const n=document.querySelector("header");if(n){const o=n.querySelectorAll("p");o.length>0&&(o[0].textContent=e.header.welcome,o.length>1&&(o[1].textContent=e.header.role));const t=n.querySelector("h1");t&&(t.textContent=e.header.name)}const r=document.querySelectorAll(".titulo-section");r.length>0&&(r[0].textContent=e.sobre,r.length>1&&(r[1].textContent=e.experiencias),r.length>2&&(r[2].textContent=e.portfolio),r.length>3&&(r[3].textContent=e.servicos),r.length>4&&(r[4].textContent=e.contato));const i=document.querySelector("#sobre .conteudo-section > p");i&&(i.textContent=e.sobre_descricao);const s=document.querySelector("#experiencias .conteudo-section > p");s&&(s.textContent=e.experiencias_descricao);const c=document.querySelector("#portfolio .conteudo-section > p");c&&(c.textContent=e.portfolio_descricao);const l=document.querySelector("#servicos .conteudo-section > p");l&&(l.textContent=e.servicos_descricao);const d=document.querySelector("#contato .conteudo-section > p");if(d&&(d.textContent=e.contato_descricao),document.querySelectorAll("[data-i18n-botao]").forEach((o=>{const t=o.getAttribute("data-i18n-botao"),a=t.split("."),n=a.length>1?a[a.length-1]:t;if(console.log(`Processando bot\xe3o com chave: ${t}, chaveBotao extra\xedda: ${n}`),e.botoes)if(void 0!==e.botoes[n])"object"==typeof e.botoes[n]&&null!==e.botoes[n]?e.botoes[n].traducao&&(o.innerHTML=e.botoes[n].traducao,console.log(`Bot\xe3o ${t} traduzido para: ${e.botoes[n].traducao} (formato objeto)`)):(o.innerHTML=e.botoes[n],console.log(`Bot\xe3o ${t} traduzido para: ${e.botoes[n]} (formato string)`));else{const a=Object.keys(e.botoes).find((e=>e.toLowerCase()===n.toLowerCase()));a?"object"==typeof e.botoes[a]&&null!==e.botoes[a]?(o.innerHTML=e.botoes[a].traducao||"",console.log(`Bot\xe3o ${t} traduzido usando case-insensitive match (formato objeto): ${a}`)):(o.innerHTML=e.botoes[a],console.log(`Bot\xe3o ${t} traduzido usando case-insensitive match (formato string): ${a}`)):console.warn(`Tradu\xe7\xe3o n\xe3o encontrada para o bot\xe3o: ${t}`)}else console.warn("Objeto 'botoes' n\xe3o encontrado nas tradu\xe7\xf5es.")})),document.querySelectorAll("[data-i18n]").forEach((o=>{const t=o.getAttribute("data-i18n"),a=t.split(".");let n=e;for(const e of a){if(!n||void 0===n[e]){console.warn(`Chave de tradu\xe7\xe3o n\xe3o encontrada: ${t}`),n=null;break}n=n[e]}null!==n&&"string"==typeof n?o.textContent=n:null!==n&&"object"==typeof n&&n.titulo&&(o.textContent=n.titulo)})),document.querySelectorAll('[data-i18n^="formulario."]').forEach((o=>{const t=o.getAttribute("data-i18n").split(".");if(t.length>=2){const a=t[1];e.formulario&&e.formulario[a]&&(o.textContent=e.formulario[a])}})),document.querySelectorAll('option[data-i18n^="formulario."]').forEach((o=>{const t=o.getAttribute("data-i18n").split(".");if(t.length>=2){const a=t[1];e.formulario&&e.formulario[a]&&(o.textContent=e.formulario[a])}})),document.querySelectorAll('[data-i18n^="servicos_cards."]').forEach((o=>{const t=o.getAttribute("data-i18n").split(".");if(t.length>=3){const a=t[1],n=t[2];e.servicos_cards&&e.servicos_cards[a]&&e.servicos_cards[a][n]&&(o.textContent=e.servicos_cards[a][n])}})),e.projetos){const t=[];Object.keys(e.projetos).forEach((o=>{const a=e.projetos[o];let n;n=o.includes("vendas")?"img/vendas.jpg":o.includes("previsao_casas")||o.includes("casas")?"img/pre\xe7os-casas.jpg":o.includes("rh")?"img/rh.jpg":`img/${o}.jpg`,t.push({id:o,titulo:a.titulo,imagem:n,alt:a.alt,link:`https://github.com/mateus-mg/${o}`,descricao:a.descricao,tecnologias:a.tecnologias})})),window.projetosPortfolio[o]=t,console.log(`${t.length} projetos carregados para o idioma ${o}`),window.renderizarPortfolio?(console.log("Renderizando portf\xf3lio ap\xf3s tradu\xe7\xe3o"),window.renderizarPortfolio("avan\xe7ar","navegacao")):(console.warn("Fun\xe7\xe3o renderizarPortfolio n\xe3o encontrada, reinicializando portf\xf3lio"),inicializarPortfolio())}else console.warn("Nenhum projeto encontrado para o idioma:",o);document.querySelectorAll(".seletor-idioma").forEach((e=>{e.getAttribute("data-idioma")===o?(e.classList.add("ativo"),console.log(`Bot\xe3o de idioma ${o} marcado como ativo`)):e.classList.remove("ativo")})),console.log("Tradu\xe7\xe3o conclu\xedda para:",o)}function configurarFormularioContato(){if(console.log("Configurando formul\xe1rio de contato"),!domCache.form)return void console.error("Formul\xe1rio de contato n\xe3o encontrado");const e=gerenciarFeedbackPopup(),o=document.getElementById("assunto");o&&o.addEventListener("change",(function(){const e=this.value,o=document.querySelector('input[name="_subject"]');o&&e&&(o.value=`${e}`,console.log("Assunto atualizado para:",o.value))}));const t=function(o,t,a=""){let n,r;return"enviando"===o?(n=`"${t}", Estamos enviando sua mensagem...`,r="Enviando Mensagem..."):(n=`<strong>Ol\xe1 ${t||"usu\xe1rio"}!</strong><br>\n                        Sua mensagem ${a?`sobre "<em>${a}</em>" `:""}foi enviada com sucesso!<br>\n                        Agradecemos seu contato e entraremos em contato o mais breve poss\xedvel.`,r="Mensagem Enviada!"),e.mostrar(n,r),n};if(domCache.form.addEventListener("submit",(async function(o){const a=document.getElementById("assunto").value,n=domCache.form.querySelector('input[name="_subject"]');n&&a&&(n.value=`${a}`);const r=document.getElementById("nome").value;localStorage.setItem("ultimo_contato_nome",r),localStorage.setItem("ultimo_assunto",a);try{const t=await e.mensagemEnviando(r),a=await e.obterTituloTraduzido("enviando");e.mostrar(t,a),o.preventDefault(),setTimeout((()=>{console.log("Enviando formul\xe1rio pelo m\xe9todo POST tradicional"),domCache.form.submit()}),3e3)}catch(e){console.error("Erro ao mostrar mensagem de envio:",e),o.preventDefault(),t("enviando",r),setTimeout((()=>domCache.form.submit()),3e3)}})),window.location.search.includes("enviado=sucesso")){const o=localStorage.getItem("ultimo_contato_nome"),a=localStorage.getItem("ultimo_assunto");!async function(){try{const t=await e.mensagemEnvio(o,a),n=await e.obterTituloTraduzido("titulo");e.mostrar(t,n)}catch(e){console.error("Erro ao mostrar mensagem de sucesso:",e),t("sucesso",o,a)}}()}}function configurarEventosTeclado(){console.log("Configurando tratamento centralizado de teclas"),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(domCache.sidebar&&domCache.sidebar.classList.contains("open")&&handlers.toggleSidebar(),domCache.menuIdiomas&&domCache.menuIdiomas.classList.remove("ativo"));const o=document.activeElement.closest(".idiomas-carrossel"),t=document.activeElement.closest(".skills-carrossel");if(o){const o=window.carrosseis?.idiomas;o&&("ArrowLeft"===e.key?(e.preventDefault(),o.mostrar(o.getAtual()-1)):"ArrowRight"===e.key&&(e.preventDefault(),o.mostrar(o.getAtual()+1)))}else if(t){const o=window.carrosseis?.skills;o&&("ArrowLeft"===e.key?(e.preventDefault(),o.mostrar(o.getAtual()-1)):"ArrowRight"===e.key&&(e.preventDefault(),o.mostrar(o.getAtual()+1)))}})),console.log("Tratamento centralizado de teclas configurado")}function gerenciarFeedbackPopup(){let e=document.getElementById("feedback-popup");if(!e){console.log("Criando popup de feedback"),e=document.createElement("div"),e.id="feedback-popup",e.className="feedback-popup",e.innerHTML='\n            <div class="feedback-content">\n                <div class="feedback-icon">\n                    <i class="fas fa-check-circle"></i>\n                </div>\n                <h3 class="feedback-titulo" data-i18n="formulario.feedback.titulo">Mensagem Enviada!</h3>\n                <p class="feedback-mensagem" data-i18n="formulario.feedback.mensagem">Sua mensagem foi recebida e ser\xe1 analisada com prioridade. Aguarde retorno em breve.</p>\n                <button class="botao feedback-fechar" data-i18n="formulario.feedback.fechar">Fechar</button>\n            </div>\n        ',document.body.appendChild(e);const t=e.querySelector(".feedback-fechar");t&&t.addEventListener("click",(()=>{o()}))}function o(){e.classList.remove("ativo"),setTimeout((()=>{if(e.style.display="none",window.location.search.includes("enviado=sucesso")){const e=window.location.pathname+window.location.hash;history.replaceState(null,"",e),console.log("Par\xe2metro 'enviado=sucesso' removido da URL")}}),300)}return{elemento:e,mostrar:function(o,t){if(o){const t=e.querySelector(".feedback-mensagem");t&&(t.innerHTML=o)}if(t){const o=e.querySelector(".feedback-titulo");o&&(o.textContent=t)}!function(){const o=localStorage.getItem("idioma")||"pt",t=`feedback_popup_${o}`,a=localStorage.getItem(t);if(a){const t=e.querySelector(".feedback-fechar");return t&&(t.textContent=a),void console.log(`Usando tradu\xe7\xe3o em cache para o bot\xe3o fechar (${o})`)}fetch(`i18n/${o}.json`).then((e=>e.json())).then((o=>{const a=e.querySelector(".feedback-fechar");a&&o.formulario?.feedback?.fechar&&(a.textContent=o.formulario.feedback.fechar,localStorage.setItem(t,o.formulario.feedback.fechar))})).catch((e=>{console.error(`Erro ao traduzir elementos do popup: ${e}`)}))}(),e.style.display="flex",e.offsetHeight,setTimeout((()=>{e.classList.add("ativo")}),10)},esconder:o,mensagemEnvio:function(e,o){const t=localStorage.getItem("idioma")||"pt";return e||(e=localStorage.getItem("ultimo_contato_nome")||"usu\xe1rio"),o||(o=localStorage.getItem("ultimo_assunto")||""),fetch(`i18n/${t}.json`).then((e=>e.json())).then((t=>o&&""!==o.trim()&&t.formulario?.feedback?.sucesso?t.formulario.feedback.sucesso.replace(/{{nome}}/g,e).replace(/{{assunto}}/g,o):t.formulario?.feedback?.sucesso_sem_assunto?t.formulario.feedback.sucesso_sem_assunto.replace(/{{nome}}/g,e):`\n                        <strong>Ol\xe1 ${e}!</strong><br>\n                        Sua mensagem ${o?`sobre "<em>${o}</em>" `:""}foi enviada com sucesso!<br>\n                        Agradecemos seu contato e entraremos em contato o mais breve poss\xedvel.\n                    `)).catch((t=>(console.error(`Erro ao buscar tradu\xe7\xf5es: ${t}`),`\n                    <strong>Ol\xe1 ${e}!</strong><br>\n                    Sua mensagem ${o?`sobre "<em>${o}</em>" `:""}foi enviada com sucesso!<br>\n                    Agradecemos seu contato e entraremos em contato o mais breve poss\xedvel.\n                `)))},mensagemEnviando:function(e){const o=localStorage.getItem("idioma")||"pt";return e||(e=localStorage.getItem("ultimo_contato_nome")||"usu\xe1rio"),fetch(`i18n/${o}.json`).then((e=>e.json())).then((o=>o.formulario?.feedback?.enviando?o.formulario.feedback.enviando.replace(/{{nome}}/g,e):`"${e}", Estamos enviando sua mensagem...`)).catch((o=>(console.error(`Erro ao buscar tradu\xe7\xf5es: ${o}`),`"${e}", Estamos enviando sua mensagem...`)))},obterTituloTraduzido:function(e="titulo"){const o=localStorage.getItem("idioma")||"pt";return fetch(`i18n/${o}.json`).then((e=>e.json())).then((o=>{const t="enviando"===e?"enviando_titulo":"titulo";return o.formulario?.feedback?.[t]?o.formulario.feedback[t]:"enviando"===e?"Enviando Mensagem...":"Mensagem Enviada!"})).catch((o=>(console.error(`Erro ao buscar tradu\xe7\xf5es para t\xedtulo: ${o}`),"enviando"===e?"Enviando Mensagem...":"Mensagem Enviada!")))}}}document.addEventListener("DOMContentLoaded",(function(){if(console.log("Inicializando o site..."),initDOMCache(),!domCache.sidebar||!domCache.toggleButton)return void console.error("Elementos cr\xedticos n\xe3o encontrados");domCache.toggleButton.addEventListener("click",handlers.toggleSidebar),document.addEventListener("click",handlers.closeMenus),document.addEventListener("keydown",handlers.handleEscape),criarOverlaySidebar(),configurarEventosTeclado(),iniciarAnimacaoSections(),configurarSeletorIdiomas(),inicializarCarrosseis(),inicializarPortfolio(),configurarFormularioContato(),configurarOutrosEventos();const e=localStorage.getItem("idioma");e&&traduzirPagina(e),console.log("Inicializa\xe7\xe3o do site conclu\xedda")})),window.atualizarIconeSidebar=atualizarIconeSidebar,document.addEventListener("DOMContentLoaded",(function(){const e=e=>{const o=document.getElementById(e);if(!o)return;const t=o.querySelectorAll(".experiencia-pagina"),a=t.length,n=document.querySelector(`.experiencia-nav-btn.anterior[data-target="${e}"]`),r=document.querySelector(`.experiencia-nav-btn.proximo[data-target="${e}"]`);let i=1;t.forEach(((e,o)=>{0===o?(e.classList.add("ativo"),e.style.display="block",e.style.opacity="1",e.style.transform="translateX(0)"):(e.classList.remove("ativo"),e.style.display="none",e.style.opacity="0")}));const s=()=>{n&&(n.disabled=1===i),r&&(r.disabled=i===a)},c=e=>{if(e<1||e>a||e===i)return;const t=e>i?"proximo":"anterior",n=o.querySelector(`.experiencia-pagina[data-pagina="${i}"]`),r=o.querySelector(`.experiencia-pagina[data-pagina="${e}"]`);n&&r&&(n.style.opacity="0",n.style.transform="proximo"===t?"translateX(-30px)":"translateX(30px)",setTimeout((()=>{n.classList.remove("ativo"),n.style.display="none",r.style.display="block",r.style.opacity="0",r.style.transform="proximo"===t?"translateX(30px)":"translateX(-30px)",r.offsetWidth,r.style.opacity="1",r.style.transform="translateX(0)",i=e,s(),r.classList.add("ativo")}),300))};n&&n.addEventListener("click",(()=>{c(i-1)})),r&&r.addEventListener("click",(()=>{c(i+1)})),s()};e("formacoes-container"),e("cursos-container")})),document.addEventListener("DOMContentLoaded",(function(){fetch("js/seo.json").then((e=>{if(!e.ok)throw new Error("Falha ao carregar dados SEO");return e.json()})).then((e=>{const o=document.createElement("script");o.type="application/ld+json",o.textContent=JSON.stringify(e),document.head.appendChild(o),console.log("Dados de SEO carregados com sucesso")})).catch((e=>{console.error("Erro ao carregar dados SEO JSON-LD:",e),fetch("js/seo.json",{headers:{Accept:"text/plain"}}).then((e=>e.text())).then((e=>{try{const o=JSON.parse(e),t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(o),document.head.appendChild(t),console.log("Dados de SEO carregados via fallback")}catch(e){console.error("Erro no fallback:",e)}}))}))}));const I18nConfig={idiomaDefault:"pt",idiomasSuportados:["pt","en","es"],cache:{versao:"1.0.1",tempoExpiracaoCache:6048e5,prefixoChave:"portfolio_"},debug:!1},traducoesCache={};class I18nManager{constructor(){this.idiomaAtual=localStorage.getItem("idioma")||I18nConfig.idiomaDefault,this.traducoes={},this.carregando={},this.callbacks=[],this.precarregarIdiomas()}async precarregarIdiomas(){try{this.idiomaAtual!==I18nConfig.idiomaDefault&&await this.carregarTraducoes(I18nConfig.idiomaDefault),await this.carregarTraducoes(this.idiomaAtual),I18nConfig.debug&&console.log(`[I18n] Sistema inicializado com o idioma: ${this.idiomaAtual}`)}catch(e){console.error("[I18n] Erro ao pr\xe9-carregar tradu\xe7\xf5es:",e)}}async carregarTraducoes(e){if(this.traducoes[e])return this.traducoes[e];if(this.carregando[e])return this.carregando[e];const o=`${I18nConfig.cache.prefixoChave}traducao_${e}`,t=`${I18nConfig.cache.prefixoChave}traducao_versao_${e}`,a=`${I18nConfig.cache.prefixoChave}traducao_data_${e}`,n=localStorage.getItem(t),r=localStorage.getItem(a),i=localStorage.getItem(o);if(n===I18nConfig.cache.versao&&r&&Date.now()-parseInt(r)<I18nConfig.cache.tempoExpiracaoCache&&i){I18nConfig.debug&&console.log(`[I18n] Usando tradu\xe7\xf5es em cache para o idioma ${e}`);try{const o=JSON.parse(i);return this.traducoes[e]=o,o}catch(o){console.error(`[I18n] Erro ao processar cache de tradu\xe7\xf5es para ${e}:`,o)}}return this.carregando[e]=new Promise((async(n,r)=>{try{I18nConfig.debug&&console.log(`[I18n] Buscando tradu\xe7\xf5es do servidor para ${e}`);const r=await fetch(`i18n/${e}.json`);if(!r.ok)throw new Error(`Falha ao carregar arquivo de tradu\xe7\xe3o para ${e}: ${r.status}`);const i=await r.json();try{localStorage.setItem(o,JSON.stringify(i)),localStorage.setItem(t,I18nConfig.cache.versao),localStorage.setItem(a,Date.now().toString()),I18nConfig.debug&&console.log(`[I18n] Tradu\xe7\xf5es para ${e} armazenadas em cache`)}catch(e){console.warn("[I18n] N\xe3o foi poss\xedvel armazenar tradu\xe7\xf5es em cache:",e),this.limparCacheAntigo()}this.traducoes[e]=i,delete this.carregando[e],n(i)}catch(o){if(console.error(`[I18n] Erro ao carregar tradu\xe7\xf5es para ${e}:`,o),e!==I18nConfig.idiomaDefault){console.log(`[I18n] Tentando fallback para o idioma padr\xe3o (${I18nConfig.idiomaDefault})`);try{n(await this.carregarTraducoes(I18nConfig.idiomaDefault))}catch(e){console.error("[I18n] Tamb\xe9m falhou ao carregar o idioma padr\xe3o:",e),r(o)}}else r(o);delete this.carregando[e]}})),this.carregando[e]}async traduzir(e,o={},t=null,a=null){const n=t||this.idiomaAtual;try{const t=await this.carregarTraducoes(n);let r=this.buscarValorPorChave(t,e);if(null==r&&n!==I18nConfig.idiomaDefault){I18nConfig.debug&&console.log(`[I18n] Chave "${e}" n\xe3o encontrada em ${n}, usando fallback para ${I18nConfig.idiomaDefault}`);const o=await this.carregarTraducoes(I18nConfig.idiomaDefault);r=this.buscarValorPorChave(o,e)}return null==r&&(r=null!==a?a:e,I18nConfig.debug&&console.warn(`[I18n] Chave "${e}" n\xe3o encontrada em nenhum idioma. Usando fallback:`,r)),"object"==typeof r&&null!==r&&r.traducao&&(r=r.traducao),o&&Object.keys(o).length>0&&(r=this.substituirParametros(r,o)),r}catch(o){return console.error(`[I18n] Erro ao buscar tradu\xe7\xe3o para "${e}":`,o),null!==a?a:e}}traduzirSync(e,o={},t=null){let a=null;return this.traducoes[this.idiomaAtual]&&(a=this.buscarValorPorChave(this.traducoes[this.idiomaAtual],e)),null==a&&this.idiomaAtual!==I18nConfig.idiomaDefault&&this.traducoes[I18nConfig.idiomaDefault]&&(a=this.buscarValorPorChave(this.traducoes[I18nConfig.idiomaDefault],e)),null==a&&(a=null!==t?t:e),"object"==typeof a&&null!==a&&a.traducao&&(a=a.traducao),o&&Object.keys(o).length>0&&(a=this.substituirParametros(a,o)),a}buscarValorPorChave(e,o){if(!e||!o)return null;const t=o.split(".");let a=e;for(let e=0;e<t.length;e++){if(null==a||"object"!=typeof a)return null;a=a[t[e]]}return a}substituirParametros(e,o){if("string"!=typeof e)return e;let t=e;for(const[e,a]of Object.entries(o)){const o=new RegExp(`{{${e}}}`,"g");t=t.replace(o,a)}return t}async alterarIdioma(e){if(!I18nConfig.idiomasSuportados.includes(e))return console.error(`[I18n] Idioma n\xe3o suportado: ${e}`),!1;try{localStorage.setItem("idioma",e),localStorage.setItem("idioma_versao",I18nConfig.cache.versao),localStorage.setItem("idioma_data",Date.now().toString()),this.idiomaAtual=e,await this.carregarTraducoes(e);for(const o of this.callbacks)try{await o(e)}catch(e){console.error("[I18n] Erro em callback de altera\xe7\xe3o de idioma:",e)}return!0}catch(o){return console.error(`[I18n] Erro ao alterar idioma para ${e}:`,o),!1}}onIdiomaAlterado(e){"function"==typeof e&&this.callbacks.push(e)}removerCallback(e=null){this.callbacks=null===e?[]:this.callbacks.filter((o=>o!==e))}async traduzirElementos(e=document){try{if(e===document){const e=await this.traduzir("tituloDocumento");document.title=e;const o=document.querySelector('meta[name="description"]');if(o){const e=await this.traduzir("metaDescricao");o.setAttribute("content",e)}}e.querySelectorAll("[data-i18n]").forEach((async e=>{const o=e.getAttribute("data-i18n"),t=await this.traduzir(o);e.textContent=t})),e.querySelectorAll("[data-i18n-html]").forEach((async e=>{const o=e.getAttribute("data-i18n-html"),t=await this.traduzir(o);e.innerHTML=t})),e.querySelectorAll("[data-i18n-botao]").forEach((async e=>{const o=`botoes.${e.getAttribute("data-i18n-botao").split(".").pop()}`,t=await this.traduzir(o);e.innerHTML=t})),e.querySelectorAll("[data-i18n-placeholder]").forEach((async e=>{const o=e.getAttribute("data-i18n-placeholder"),t=await this.traduzir(o);e.setAttribute("placeholder",t)})),e.querySelectorAll("[data-i18n-alt]").forEach((async e=>{const o=e.getAttribute("data-i18n-alt"),t=await this.traduzir(o);e.setAttribute("alt",t)}))}catch(e){console.error("[I18n] Erro ao traduzir elementos:",e)}}limparCacheAntigo(){console.log("[I18n] Limpando cache antigo para liberar espa\xe7o");try{const e=[],o=`${I18nConfig.cache.prefixoChave}traducao_`;for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);if(a&&a.startsWith(o)){const t=a.replace(o,"").split("_")[0],n=localStorage.getItem(`${I18nConfig.cache.prefixoChave}traducao_data_${t}`);e.push({chave:a,idioma:t,data:n?parseInt(n):0})}}e.sort(((e,o)=>e.data-o.data));const t=Math.ceil(e.length/2);for(let o=0;o<t&&o<e.length;o++){const t=e[o];localStorage.removeItem(t.chave),localStorage.removeItem(`${I18nConfig.cache.prefixoChave}traducao_versao_${t.idioma}`),localStorage.removeItem(`${I18nConfig.cache.prefixoChave}traducao_data_${t.idioma}`),I18nConfig.debug&&console.log(`[I18n] Cache removido: ${t.chave}`)}console.log(`[I18n] ${t} itens de cache antigos removidos`)}catch(e){console.error("[I18n] Erro ao limpar cache:",e)}}getIdiomaAtual(){return this.idiomaAtual}getIdiomasSuportados(){return I18nConfig.idiomasSuportados}}function carregarDetalhes(e,o){console.log(`Carregando detalhes do projeto ${e} no idioma ${o}`);const t=(new Date).getTime();fetch(`i18n/${o}.json?v=${t}`).then((e=>{if(!e.ok)throw new Error(`Erro ao carregar arquivo de tradu\xe7\xe3o: ${e.status}`);return e.json()})).then((t=>{if(!t.projetos||!t.projetos[e])return void mostrarErro(`Projeto n\xe3o encontrado no idioma ${o}`);const a=t.projetos[e];document.title=`${a.titulo} - Mateus Galv\xe3o`,document.getElementById("projeto-titulo").textContent=a.titulo,document.getElementById("projeto-descricao-curta").textContent=a.descricao;const n=document.getElementById("projeto-descricao-longa");a.descricao_longa?(n.innerHTML=a.descricao_longa,n.style.display="block"):n.style.display="none",document.querySelector(".tags-container").innerHTML=a.tecnologias.map((e=>`<span class="portfolio-tag">${e}</span>`)).join("");const r=document.getElementById("projeto-relatorio"),i=r.querySelector(".relatorio-conteudo");a.relatorio?(i.innerHTML=a.relatorio,r.style.display="block"):(i.innerHTML="\n                    <p>Relat\xf3rio detalhado em desenvolvimento.</p>\n                    <p>Este projeto est\xe1 sendo documentado e em breve teremos informa\xe7\xf5es mais detalhadas sobre seu desenvolvimento, desafios enfrentados e solu\xe7\xf5es implementadas.</p>\n                ",r.style.display="block"),document.querySelector(".github-btn").href=`https://github.com/mateus-mg/${e}`,atualizarMetaTags(a.titulo,a.descricao),console.log("Detalhes do projeto carregados com sucesso")})).catch((e=>{console.error("Erro ao carregar detalhes do projeto:",e),mostrarErro(`Erro ao carregar as tradu\xe7\xf5es para ${o}. Por favor, tente novamente.`)}))}function mostrarErro(e){document.querySelector(".projeto-detalhes").innerHTML=`\n        <div class="erro-container">\n            <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #dc3545; margin-bottom: 1rem;"></i>\n            <h2>Oops! Algo deu errado</h2>\n            <p>${e}</p>\n            <a href="index.html#portfolio" class="botao voltar-btn">Voltar ao Portf\xf3lio</a>\n        </div>\n    `}function atualizarMetaTags(e,o){document.querySelector('meta[name="description"]').setAttribute("content",o),document.querySelector('meta[property="og:title"]').setAttribute("content",`${e} - Mateus Galv\xe3o`),document.querySelector('meta[property="og:description"]').setAttribute("content",o)}window.i18n=new I18nManager,document.addEventListener("DOMContentLoaded",(()=>{"loading"===document.readyState?I18nConfig.debug&&console.log("[I18n] Aguardando DOMContentLoaded para inicializar as tradu\xe7\xf5es"):(I18nConfig.debug&&console.log("[I18n] DOM j\xe1 carregado, inicializando tradu\xe7\xf5es"),window.i18n.traduzirElementos())})),window.t=async function(e,o,t){return await window.i18n.traduzir(e,o,null,t)},window.tSync=function(e,o,t){return window.i18n.traduzirSync(e,o,t)},window.alterarIdioma=async function(e){const o=await window.i18n.alterarIdioma(e);return o&&await window.i18n.traduzirElementos(),o},document.addEventListener("DOMContentLoaded",(function(){console.log("Inicializando p\xe1gina de detalhes do projeto");const e=new URLSearchParams(window.location.search).get("id");if(!e)return console.error("ID do projeto n\xe3o encontrado na URL"),void mostrarErro("Nenhum projeto especificado");console.log(`Carregando detalhes do projeto: ${e}`);const o=sessionStorage.getItem("idioma")||"pt";document.querySelector(".idioma-atual").textContent=o.toUpperCase(),document.querySelectorAll(".seletor-idioma").forEach((e=>{e.classList.remove("ativo"),e.getAttribute("data-idioma")===o&&e.classList.add("ativo")})),carregarDetalhes(e,o);const t=document.querySelector(".menu-idiomas-toggle"),a=document.querySelector(".menu-idiomas");t&&a&&(t.addEventListener("click",(function(){a.classList.toggle("ativo");const e=a.classList.contains("ativo");t.setAttribute("aria-expanded",e)})),document.addEventListener("click",(function(e){t.contains(e.target)||a.contains(e.target)||(a.classList.remove("ativo"),t.setAttribute("aria-expanded","false"))}))),document.querySelectorAll(".seletor-idioma").forEach((o=>{o.addEventListener("click",(function(){const o=this.getAttribute("data-idioma");sessionStorage.setItem("idioma",o),carregarDetalhes(e,o),document.querySelectorAll(".seletor-idioma").forEach((e=>{e.classList.remove("ativo")})),this.classList.add("ativo"),document.querySelector(".idioma-atual").textContent=o.toUpperCase(),a.classList.remove("ativo"),t.setAttribute("aria-expanded","false")}))}));const n=document.getElementById("btn-topo");n&&(window.addEventListener("scroll",(function(){window.scrollY>200?n.classList.add("mostrar"):n.classList.remove("mostrar")})),n.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})))}));