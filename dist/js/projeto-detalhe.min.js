function configMenuIdiomas(){const o=document.querySelector(".menu-idiomas-toggle"),e=document.querySelector(".menu-idiomas");o&&e&&(o.addEventListener("click",(function(){e.classList.toggle("ativo"),o.setAttribute("aria-expanded",e.classList.contains("ativo"))})),document.addEventListener("click",(function(a){o.contains(a.target)||e.contains(a.target)||(e.classList.remove("ativo"),o.setAttribute("aria-expanded","false"))})),document.addEventListener("keydown",(function(a){"Escape"===a.key&&e.classList.contains("ativo")&&(e.classList.remove("ativo"),o.setAttribute("aria-expanded","false"))}))),document.querySelectorAll(".seletor-idioma").forEach((a=>{a.addEventListener("click",(async function(){const a=this.getAttribute("data-idioma"),r=new URLSearchParams(window.location.search).get("id");window.i18n?await window.alterarIdioma(a):localStorage.setItem("idioma",a),atualizarUIIdioma(a),r&&await carregarDetalhes(r,a),e&&(e.classList.remove("ativo"),o&&o.setAttribute("aria-expanded","false"))}))}))}function atualizarUIIdioma(o){const e=document.querySelector(".idioma-atual");e&&(e.textContent=o.toUpperCase()),document.querySelectorAll(".seletor-idioma").forEach((e=>{e.classList.remove("ativo"),e.getAttribute("data-idioma")===o&&e.classList.add("ativo")}))}async function mostrarErro(o){if(console.log("Mostrando mensagem de erro:",o),window.i18n)try{o=await window.i18n.traduzir("erros.carregamento_projeto",{},null,o)}catch(o){console.error("Erro ao traduzir mensagem de erro:",o)}const e=document.querySelector(".projeto-conteudo"),a=document.getElementById("projeto-titulo");if(a&&(a.textContent="Erro"),e)e.innerHTML=`\n            <div class="projeto-erro">\n                <h2>Ocorreu um erro</h2>\n                <p>${o}</p>\n                <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n            </div>\n        `;else{const e=document.querySelector(".main-content");e&&(e.innerHTML=`\n                <h1 class="projeto-titulo-simples">Erro</h1>\n                <div class="projeto-conteudo">\n                    <div class="projeto-erro">\n                        <h2>Ocorreu um erro</h2>\n                        <p>${o}</p>\n                        <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n                    </div>\n                </div>\n            `)}}async function carregarDetalhes(o,e){if(console.log(`Carregando detalhes do projeto ${o} no idioma ${e}`),[{id:"projeto-titulo",tipo:"ID"},{selector:".projeto-conteudo",tipo:"Class"},{id:"projeto-descricao-curta",tipo:"ID"},{id:"projeto-descricao-longa",tipo:"ID"}].filter((o=>"ID"===o.tipo?!document.getElementById(o.id):!document.querySelector(o.selector))).length>0){if(!window.location.pathname.includes("projeto.html")&&!window.location.pathname.endsWith("/projeto"))return void(window.location.href=`projeto.html?id=${o}`);criarEstruturaBasica(o)}try{let a;if(window.i18n){if(a=await window.i18n.traduzir(`projetos.${o}`),!a||"string"==typeof a)throw new Error(`Projeto n\xe3o encontrado no idioma ${e}`)}else{const r=await fetch(`i18n/${e}.json`);if(!r.ok)throw new Error(`Falha ao carregar arquivo de tradu\xe7\xe3o para ${e}: ${r.status}`);const n=await r.json();if(a=n.projetos?.[o],!a)throw new Error(`Projeto n\xe3o encontrado no idioma ${e}`)}document.title=`${a.titulo} - Mateus Galv\xe3o`;const r=document.getElementById("projeto-titulo");r&&(r.textContent=a.titulo);const n=document.getElementById("projeto-descricao-curta");n&&(n.textContent=a.descricao);const i=document.getElementById("projeto-descricao-longa");i&&(a.descricao_longa?(i.innerHTML=a.descricao_longa,i.classList.add("visible"),i.classList.remove("hidden")):(i.classList.add("hidden"),i.classList.remove("visible")));const s=document.querySelector(".tags-container");s&&a.tecnologias&&Array.isArray(a.tecnologias)&&(s.innerHTML=a.tecnologias.map((o=>`<span class="portfolio-tag">${o}</span>`)).join(""));const d=document.getElementById("projeto-relatorio");if(d){const o=d.querySelector(".relatorio-conteudo");if(o)if(a.relatorio)o.innerHTML=a.relatorio,d.classList.add("visible"),d.classList.remove("hidden");else{const e=window.i18n?await window.i18n.traduzir("projetos.relatorio_padrao"):"Este projeto ainda n\xe3o possui um relat\xf3rio detalhado.";o.innerHTML=e,d.classList.add("visible"),d.classList.remove("hidden")}}const c=document.querySelector(".github-btn");c&&(c.href=`https://github.com/mateus-mg/${o}`),atualizarMetaTags(a.titulo,a.descricao),window.PubSub&&PubSub.publish("projeto:detalhesCarregados",{projetoId:o,idioma:e,titulo:a.titulo})}catch(a){console.error("Erro ao carregar detalhes do projeto:",a);let r="Erro ao carregar detalhes do projeto";if(window.i18n)try{r=await window.i18n.traduzir("erros.carregamento_projeto")}catch(o){console.error("Erro ao traduzir mensagem de erro:",o)}mostrarErro(r),window.PubSub&&PubSub.publish("projeto:erroCarregamento",{projetoId:o,idioma:e,erro:a.message})}}function criarEstruturaBasica(o){const e=document.querySelector(".main-content");e?(e.innerHTML='\n        <div class="projeto-container">\n            <h1 id="projeto-titulo">Carregando projeto...</h1>\n            <p id="projeto-descricao-curta">Aguarde enquanto carregamos os detalhes do projeto.</p>\n            \n            <div class="projeto-conteudo">\n                <div id="projeto-descricao-longa"></div>\n                \n                <div class="projeto-meta">\n                    <h3>Tecnologias</h3>\n                    <div class="tags-container">\n                        <span class="portfolio-tag">Carregando...</span>\n                    </div>\n                </div>\n                \n                <div id="projeto-relatorio">\n                    <h2>Relat\xf3rio do Projeto</h2>\n                    <div class="relatorio-conteudo"></div>\n                </div>\n                \n                <div class="projeto-links">\n                    <a href="#" class="botao github-btn" target="_blank" rel="noopener">\n                        <i class="fab fa-github"></i> Ver no GitHub\n                    </a>\n                    <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n                </div>\n            </div>\n        </div>\n    ',console.log("Estrutura b\xe1sica criada para o projeto:",o)):console.error("Elemento main-content n\xe3o encontrado")}function atualizarMetaTags(o,e){const a=document.querySelector('meta[name="description"]');a&&a.setAttribute("content",e);const r=document.querySelector('meta[property="og:title"]');r&&r.setAttribute("content",`${o} - Mateus Galv\xe3o`);const n=document.querySelector('meta[property="og:description"]');n&&n.setAttribute("content",e),console.log("Meta tags atualizadas para SEO")}document.addEventListener("DOMContentLoaded",(async function(){console.log("Inicializando p\xe1gina de detalhes do projeto");try{if(!window.location.pathname.includes("projeto.html")&&!window.location.pathname.endsWith("/projeto"))return void console.log("N\xe3o estamos na p\xe1gina de detalhes do projeto, pulando inicializa\xe7\xe3o");const o=new URLSearchParams(window.location.search||"").get("id");if(!o)return console.error("ID do projeto n\xe3o encontrado na URL"),void(window.location.href="index.html#portfolio");console.log(`Carregando detalhes do projeto: ${o}`),window.AppState?.isInitialized||(console.log("Aguardando inicializa\xe7\xe3o do AppState..."),await new Promise((o=>{const e=setInterval((()=>{window.AppState?.isInitialized&&(clearInterval(e),o())}),100);setTimeout((()=>{clearInterval(e),o()}),3e3)}))),window.i18n&&!window.i18n.initialized&&(console.log("Aguardando inicializa\xe7\xe3o do sistema i18n..."),await new Promise((o=>{const e=setInterval((()=>{window.i18n.getIdiomaAtual&&(clearInterval(e),o())}),100);setTimeout((()=>{clearInterval(e),o()}),3e3)})));const idiomaAtual=window.AppState?.idiomaAtual||window.i18n?.getIdiomaAtual()||localStorage.getItem("idioma")||"pt";console.log("Usando idioma:",idiomaAtual),atualizarUIIdioma(idiomaAtual),await carregarDetalhes(o,idiomaAtual)}catch(o){console.error("Erro na inicializa\xe7\xe3o da p\xe1gina de detalhes:",o),mostrarErro("Ocorreu um erro ao carregar a p\xe1gina de detalhes")}configMenuIdiomas()}));
//# sourceMappingURL=script.js.map