const PubSub={_subscribers:{},subscribe(o,e){this._subscribers[o]||(this._subscribers[o]=[]);const t=this._subscribers[o].push(e)-1;return{unsubscribe:()=>{this._subscribers[o].splice(t,1),0===this._subscribers[o].length&&delete this._subscribers[o]}}},publish(o,e){this._subscribers[o]&&this._subscribers[o].forEach((t=>{try{t(e)}catch(e){console.error(`Erro em um subscriber do evento ${o}:`,e)}}))},clearEvent(o){delete this._subscribers[o]},clearAllEvents(){this._subscribers={}},getEvents(){return Object.keys(this._subscribers)},getSubscribersCount(o){return this._subscribers[o]?.length||0}};window.PubSub=PubSub;const AppState={_state:{idioma:{atual:localStorage.getItem("idioma")||"pt",projetosCarregados:["pt"]},portfolio:{paginaAtual:0,emTransicao:!1},cache:{versao:"1.0.1",tempoExpiracaoCache:6048e5,prefixoChave:"portfolio_"}},get idiomaAtual(){return this._state.idioma.atual},get idiomaProjetoAtual(){return this._state.idioma.atual},get paginaAtualPortfolio(){return this._state.portfolio.paginaAtual},get emTransicaoPortfolio(){return this._state.portfolio.emTransicao},get configCache(){return{...this._state.cache}},get idiomasProjetosCarregados(){return[...this._state.idioma.projetosCarregados]},setIdiomaAtual(o){const e=this._state.idioma.atual;return this._state.idioma.atual=o,localStorage.setItem("idioma",o),localStorage.setItem("idioma_versao",this._state.cache.versao),localStorage.setItem("idioma_data",Date.now().toString()),PubSub.publish("idioma:alterado",{novo:o,antigo:e}),o},setPaginaPortfolio(o){const e=this._state.portfolio.paginaAtual;return this._state.portfolio.paginaAtual=o,PubSub.publish("portfolio:paginaAlterada",{nova:o,antiga:e}),o},setTransicaoPortfolio(o){return this._state.portfolio.emTransicao=o,PubSub.publish("portfolio:transicao",{emTransicao:o}),o},adicionarIdiomaCarregado(o){this._state.idioma.projetosCarregados.includes(o)||(this._state.idioma.projetosCarregados.push(o),PubSub.publish("portfolio:idiomaCarregado",{idioma:o}))},salvarEstado(){try{const o={idioma:this._state.idioma,portfolio:{paginaAtual:this._state.portfolio.paginaAtual}};return localStorage.setItem("app_state",JSON.stringify(o)),!0}catch(o){return console.error("Erro ao salvar estado da aplica\xe7\xe3o:",o),!1}},carregarEstado(){try{const o=localStorage.getItem("app_state");if(o){const e=JSON.parse(o);return e.idioma&&(this._state.idioma={...this._state.idioma,...e.idioma}),e.portfolio&&(this._state.portfolio.paginaAtual=e.portfolio.paginaAtual),!0}return!1}catch(o){return console.error("Erro ao carregar estado da aplica\xe7\xe3o:",o),!1}},resetarEstado(){this._state.idioma.atual="pt",this._state.portfolio.paginaAtual=0,this._state.portfolio.emTransicao=!1,localStorage.removeItem("app_state"),PubSub.publish("app:estadoResetado",{})}};document.addEventListener("DOMContentLoaded",(()=>{AppState.carregarEstado()})),window.AppState=AppState,document.addEventListener("DOMContentLoaded",(function(){if(window.ImageManager)console.log("ImageManager j\xe1 est\xe1 dispon\xedvel, iniciando precarregamento"),o();else{console.log("Aguardando carregamento do optimizer.js");const e=setInterval((function(){window.ImageManager&&(clearInterval(e),console.log("ImageManager detectado, iniciando funcionalidades"),o())}),50);setTimeout((function(){window.ImageManager||(console.warn("ImageManager n\xe3o detectado ap\xf3s timeout, criando fallback"),window.ImageManager={precarregarImagensCriticas:function(){console.log("Fallback: Precarregando imagens cr\xedticas")},aplicarRedimensionamentoResponsivo:function(){console.log("Fallback: Tentativa de redimensionamento")}}),clearInterval(e),o()}),2e3)}function o(){window.ImageManager.precarregarImagensCriticas&&(console.log("Iniciando precarregamento de imagens cr\xedticas"),window.ImageManager.precarregarImagensCriticas()),window.ImageManager.aplicarRedimensionamentoResponsivo&&(console.log("Aplicando redimensionamento responsivo a todas as imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((o=>{o.complete?window.ImageManager.aplicarRedimensionamentoResponsivo(o):o.onload=function(){window.ImageManager.aplicarRedimensionamentoResponsivo(this)}})))}})),function(){window.lcpMonitoringActive=!0,window.ImageManager={verificarSuporteWebP:function(){return new Promise((o=>{const e=new Image;e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",e.onload=e.onerror=function(){o(e.width>0&&e.height>0)}}))},configurarLazyLoading:function(){if(console.log("Configurando lazy loading de imagens"),"IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target,a=t.getAttribute("data-src");a&&(t.src=a,t.removeAttribute("data-src")),o.unobserve(t)}}))}),{rootMargin:"50px",threshold:.1});document.querySelectorAll("img[data-src]").forEach((e=>{o.observe(e)}))}else document.querySelectorAll("img[data-src]").forEach((o=>{o.src=o.getAttribute("data-src"),o.removeAttribute("data-src")}));console.log("Lazy loading configurado")},otimizarTodasImagens:async function(){console.log("Otimizando imagens"),await this.verificarSuporteWebP()?(console.log("Navegador suporta WebP, trocando formato de imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((o=>{const e=o.getAttribute("src");if(e&&(e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".png"))){const t=e.replace(/\.(jpg|jpeg|png)$/i,".webp");o.setAttribute("src",t),this.aplicarRedimensionamentoResponsivo(o)}}))):(console.log("Navegador n\xe3o suporta WebP, mantendo formato original das imagens"),document.querySelectorAll('img:not([src^="data:"])').forEach((o=>{this.aplicarRedimensionamentoResponsivo(o)})))},aplicarRedimensionamentoResponsivo:function(o){const e=o.parentElement.clientWidth;o.naturalWidth<100||o.src.includes("favicon")||(0!==e?o.naturalWidth>1.5*e&&(console.log(`Redimensionando imagem ${o.src} - tamanho atual: ${o.naturalWidth}px, cont\xeainer: ${e}px`),o.style.maxWidth="100%",!o.srcset)&&(o.src,o.sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",o.loading||(o.loading="lazy")):"complete"!==document.readyState&&window.addEventListener("load",(()=>{setTimeout((()=>this.aplicarRedimensionamentoResponsivo(o)),100)}),{once:!0}))},precarregarImagensCriticas:function(){["img/webp/header-bg.webp","img/webp/favicon.webp"].forEach((o=>{const e=document.createElement("link");e.rel="preload",e.as="image",e.href=o,document.head.appendChild(e)}))},carregarImagemFundo:function(){console.log("Carregando imagem de fundo do cabe\xe7alho");const o=document.querySelector("header");o&&o.classList.add("bg-loaded")},inicializar:function(){if("PerformanceObserver"in window)try{new PerformanceObserver((o=>{for(const e of o.getEntries())console.debug(`[Performance] ${e.name}: ${e.startTime.toFixed(0)}ms`)})).observe({type:"largest-contentful-paint",buffered:!0})}catch(o){console.error("Erro ao configurar PerformanceObserver",o)}"requestIdleCallback"in window?requestIdleCallback((()=>{this.carregarImagemFundo(),setTimeout((()=>this.configurarLazyLoading()),100),setTimeout((()=>this.otimizarTodasImagens()),200)}),{timeout:1e3}):setTimeout((()=>{this.carregarImagemFundo(),setTimeout((()=>this.configurarLazyLoading()),100),setTimeout((()=>this.otimizarTodasImagens()),200)}),500)}};const o=()=>{const o=document.querySelector('header p[data-i18n="header.role"]');o&&(o.classList.add("lcp-priority"),o.classList.add("lcp-element"),o.setAttribute("fetchpriority","high"))};if("loading"===document.readyState?document.addEventListener("readystatechange",(()=>{"interactive"===document.readyState&&o()})):o(),"PerformanceObserver"in window){const o=new PerformanceObserver((e=>{const t=e.getEntries(),a=t[t.length-1];console.log("LCP:",a.startTime,a),window.ImageManager.inicializar(),o.disconnect()}));o.observe({type:"largest-contentful-paint",buffered:!0})}else setTimeout((()=>window.ImageManager.inicializar()),300)}(),document.addEventListener("DOMContentLoaded",(()=>{document.querySelector("header.bg-loaded")||(console.log("Inicializando gerenciador de imagens via DOMContentLoaded (fallback)"),window.ImageManager.inicializar())}));const I18nConfig={idiomaDefault:"pt",idiomasSuportados:["pt","en","es"],cache:{versao:"1.0.1",tempoExpiracaoCache:6048e5,prefixoChave:"portfolio_"},debug:!1},traducoesCache={};class I18nManager{constructor(){this.idiomaAtual=localStorage.getItem("idioma")||I18nConfig.idiomaDefault,this.traducoes={},this.carregando={},this.callbacks=[],this.precarregarIdiomas()}async precarregarIdiomas(){try{this.idiomaAtual!==I18nConfig.idiomaDefault&&await this.carregarTraducoes(I18nConfig.idiomaDefault),await this.carregarTraducoes(this.idiomaAtual),I18nConfig.debug&&console.log(`[I18n] Sistema inicializado com o idioma: ${this.idiomaAtual}`)}catch(o){console.error("[I18n] Erro ao pr\xe9-carregar tradu\xe7\xf5es:",o)}}async carregarTraducoes(o){if(this.traducoes[o])return this.traducoes[o];if(this.carregando[o])return this.carregando[o];const e=`${I18nConfig.cache.prefixoChave}traducao_${o}`,t=`${I18nConfig.cache.prefixoChave}traducao_versao_${o}`,a=`${I18nConfig.cache.prefixoChave}traducao_data_${o}`,r=localStorage.getItem(t),n=localStorage.getItem(a),i=localStorage.getItem(e);if(r===I18nConfig.cache.versao&&n&&Date.now()-parseInt(n)<I18nConfig.cache.tempoExpiracaoCache&&i){I18nConfig.debug&&console.log(`[I18n] Usando tradu\xe7\xf5es em cache para o idioma ${o}`);try{const e=JSON.parse(i);return this.traducoes[o]=e,e}catch(e){console.error(`[I18n] Erro ao processar cache de tradu\xe7\xf5es para ${o}:`,e)}}return this.carregando[o]=new Promise((async(r,n)=>{try{I18nConfig.debug&&console.log(`[I18n] Buscando tradu\xe7\xf5es do servidor para ${o}`);const n=await fetch(`i18n/${o}.json`);if(!n.ok)throw new Error(`Falha ao carregar arquivo de tradu\xe7\xe3o para ${o}: ${n.status}`);const i=await n.json();try{localStorage.setItem(e,JSON.stringify(i)),localStorage.setItem(t,I18nConfig.cache.versao),localStorage.setItem(a,Date.now().toString()),I18nConfig.debug&&console.log(`[I18n] Tradu\xe7\xf5es para ${o} armazenadas em cache`)}catch(o){console.warn("[I18n] N\xe3o foi poss\xedvel armazenar tradu\xe7\xf5es em cache:",o),this.limparCacheAntigo()}this.traducoes[o]=i,delete this.carregando[o],r(i)}catch(e){if(console.error(`[I18n] Erro ao carregar tradu\xe7\xf5es para ${o}:`,e),o!==I18nConfig.idiomaDefault){console.log(`[I18n] Tentando fallback para o idioma padr\xe3o (${I18nConfig.idiomaDefault})`);try{r(await this.carregarTraducoes(I18nConfig.idiomaDefault))}catch(o){console.error("[I18n] Tamb\xe9m falhou ao carregar o idioma padr\xe3o:",o),n(e)}}else n(e);delete this.carregando[o]}})),this.carregando[o]}async traduzir(o,e={},t=null,a=null){const r=t||this.idiomaAtual;try{const t=await this.carregarTraducoes(r);let n=this.buscarValorPorChave(t,o);if(null==n&&r!==I18nConfig.idiomaDefault){I18nConfig.debug&&console.log(`[I18n] Chave "${o}" n\xe3o encontrada em ${r}, usando fallback para ${I18nConfig.idiomaDefault}`);const e=await this.carregarTraducoes(I18nConfig.idiomaDefault);n=this.buscarValorPorChave(e,o)}return null==n&&(n=null!==a?a:o,I18nConfig.debug&&console.warn(`[I18n] Chave "${o}" n\xe3o encontrada em nenhum idioma. Usando fallback:`,n)),"object"==typeof n&&null!==n&&n.traducao&&(n=n.traducao),e&&Object.keys(e).length>0&&(n=this.substituirParametros(n,e)),n}catch(e){return console.error(`[I18n] Erro ao buscar tradu\xe7\xe3o para "${o}":`,e),null!==a?a:o}}traduzirSync(o,e={},t=null){let a=null;return this.traducoes[this.idiomaAtual]&&(a=this.buscarValorPorChave(this.traducoes[this.idiomaAtual],o)),null==a&&this.idiomaAtual!==I18nConfig.idiomaDefault&&this.traducoes[I18nConfig.idiomaDefault]&&(a=this.buscarValorPorChave(this.traducoes[I18nConfig.idiomaDefault],o)),null==a&&(a=null!==t?t:o),"object"==typeof a&&null!==a&&a.traducao&&(a=a.traducao),e&&Object.keys(e).length>0&&(a=this.substituirParametros(a,e)),a}buscarValorPorChave(o,e){if(!o||!e)return null;const t=e.split(".");let a=o;for(let o=0;o<t.length;o++){if(null==a||"object"!=typeof a)return null;a=a[t[o]]}return a}substituirParametros(o,e){if("string"!=typeof o)return o;let t=o;for(const[o,a]of Object.entries(e)){const e=new RegExp(`{{${o}}}`,"g");t=t.replace(e,a)}return t}async alterarIdioma(o){if(!I18nConfig.idiomasSuportados.includes(o))return console.error(`[I18n] Idioma n\xe3o suportado: ${o}`),!1;try{localStorage.setItem("idioma",o),localStorage.setItem("idioma_versao",I18nConfig.cache.versao),localStorage.setItem("idioma_data",Date.now().toString()),this.idiomaAtual=o,await this.carregarTraducoes(o);for(const e of this.callbacks)try{await e(o)}catch(o){console.error("[I18n] Erro em callback de altera\xe7\xe3o de idioma:",o)}return!0}catch(e){return console.error(`[I18n] Erro ao alterar idioma para ${o}:`,e),!1}}onIdiomaAlterado(o){"function"==typeof o&&this.callbacks.push(o)}removerCallback(o=null){this.callbacks=null===o?[]:this.callbacks.filter((e=>e!==o))}async traduzirElementos(o=document){try{if(o===document){const o=await this.traduzir("tituloDocumento");document.title=o;const e=document.querySelector('meta[name="description"]');if(e){const o=await this.traduzir("metaDescricao");e.setAttribute("content",o)}}o.querySelectorAll("[data-i18n]").forEach((async o=>{const e=o.getAttribute("data-i18n"),t=await this.traduzir(e);o.textContent=t})),o.querySelectorAll("[data-i18n-html]").forEach((async o=>{const e=o.getAttribute("data-i18n-html"),t=await this.traduzir(e);o.innerHTML=t})),o.querySelectorAll("[data-i18n-botao]").forEach((async o=>{const e=`botoes.${o.getAttribute("data-i18n-botao").split(".").pop()}`,t=await this.traduzir(e);o.innerHTML=t})),o.querySelectorAll("[data-i18n-placeholder]").forEach((async o=>{const e=o.getAttribute("data-i18n-placeholder"),t=await this.traduzir(e);o.setAttribute("placeholder",t)})),o.querySelectorAll("[data-i18n-alt]").forEach((async o=>{const e=o.getAttribute("data-i18n-alt"),t=await this.traduzir(e);o.setAttribute("alt",t)}))}catch(o){console.error("[I18n] Erro ao traduzir elementos:",o)}}limparCacheAntigo(){console.log("[I18n] Limpando cache antigo para liberar espa\xe7o");try{const o=[],e=`${I18nConfig.cache.prefixoChave}traducao_`;for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);if(a&&a.startsWith(e)){const t=a.replace(e,"").split("_")[0],r=localStorage.getItem(`${I18nConfig.cache.prefixoChave}traducao_data_${t}`);o.push({chave:a,idioma:t,data:r?parseInt(r):0})}}o.sort(((o,e)=>o.data-e.data));const t=Math.ceil(o.length/2);for(let e=0;e<t&&e<o.length;e++){const t=o[e];localStorage.removeItem(t.chave),localStorage.removeItem(`${I18nConfig.cache.prefixoChave}traducao_versao_${t.idioma}`),localStorage.removeItem(`${I18nConfig.cache.prefixoChave}traducao_data_${t.idioma}`),I18nConfig.debug&&console.log(`[I18n] Cache removido: ${t.chave}`)}console.log(`[I18n] ${t} itens de cache antigos removidos`)}catch(o){console.error("[I18n] Erro ao limpar cache:",o)}}getIdiomaAtual(){return this.idiomaAtual}getIdiomasSuportados(){return I18nConfig.idiomasSuportados}}window.i18n=new I18nManager,document.addEventListener("DOMContentLoaded",(()=>{"loading"===document.readyState?I18nConfig.debug&&console.log("[I18n] Aguardando DOMContentLoaded para inicializar as tradu\xe7\xf5es"):(I18nConfig.debug&&console.log("[I18n] DOM j\xe1 carregado, inicializando tradu\xe7\xf5es"),window.i18n.traduzirElementos())})),window.t=async function(o,e,t){return await window.i18n.traduzir(o,e,null,t)},window.tSync=function(o,e,t){return window.i18n.traduzirSync(o,e,t)},window.alterarIdioma=async function(o){const e=await window.i18n.alterarIdioma(o);return e&&await window.i18n.traduzirElementos(),e};const domCache={sidebar:null,toggleButton:null,menuIdiomas:null,portfolioContainer:null,form:null},CONFIG_CACHE={versao:"1.0.1",tempoExpiracaoCache:6048e5,prefixoChave:"portfolio_"};function initDOMCache(){domCache.sidebar=document.getElementById("sidebar"),domCache.toggleButton=document.getElementById("toggle-button"),domCache.menuIdiomas=document.querySelector(".menu-idiomas"),domCache.portfolioContainer=document.querySelector(".portfolio-container"),domCache.form=document.getElementById("formulario-contato")}function atualizarIconeSidebar(o){console.log("Atualizando \xedcone do sidebar para:",o?"X":"\u2630"),domCache.toggleButton&&(domCache.toggleButton.classList.add("trocando"),setTimeout((function(){domCache.toggleButton.innerHTML=o?'<span class="icone-menu entrando">\u2715</span>':'<span class="icone-menu entrando">\u2630</span>',setTimeout((function(){domCache.toggleButton.classList.remove("trocando")}),50)}),140))}window.carrosseis=window.carrosseis||{};const handlers={toggleSidebar:()=>{if(!domCache.sidebar)return;domCache.sidebar.classList.toggle("open");const o=domCache.sidebar.classList.contains("open");domCache.toggleButton.setAttribute("aria-expanded",o),domCache.sidebar.setAttribute("aria-label",o?"Menu de navega\xe7\xe3o aberto":"Menu de navega\xe7\xe3o fechado"),atualizarIconeSidebar(o);const e=document.getElementById("sidebar-overlay");e&&e.classList.toggle("ativo")},closeMenus:o=>{domCache.sidebar&&domCache.sidebar.classList.contains("open")&&(domCache.sidebar.contains(o.target)||domCache.toggleButton.contains(o.target)||handlers.toggleSidebar()),domCache.menuIdiomas&&domCache.menuIdiomas.classList.contains("ativo")&&(document.querySelector(".menu-idiomas-toggle").contains(o.target)||domCache.menuIdiomas.contains(o.target)||domCache.menuIdiomas.classList.remove("ativo"))},handleEscape:o=>{"Escape"===o.key&&(domCache.sidebar&&domCache.sidebar.classList.contains("open")&&handlers.toggleSidebar(),domCache.menuIdiomas&&domCache.menuIdiomas.classList.remove("ativo"))}};function criarOverlaySidebar(){console.log("Criando/verificando overlay do sidebar");let o=document.getElementById("sidebar-overlay");return o||(o=document.createElement("div"),o.id="sidebar-overlay",o.className="sidebar-overlay",document.body.appendChild(o),console.log("Overlay criado")),o.addEventListener("click",(function(){console.log("Overlay clicado - fechando sidebar"),domCache.sidebar&&(domCache.sidebar.classList.remove("open"),o.classList.remove("ativo"),domCache.toggleButton&&(domCache.toggleButton.setAttribute("aria-expanded","false"),domCache.toggleButton.innerHTML='<span class="icone-menu">\u2630</span>',domCache.toggleButton.classList.remove("menu-aberto")))})),o}function configurarSeletorIdiomas(){console.log("Configurando seletor de idiomas");const o=document.querySelector(".menu-idiomas-toggle"),e=document.querySelector(".menu-idiomas");o&&e?(o.addEventListener("click",(()=>{console.log("Bot\xe3o de idiomas clicado"),e.classList.toggle("ativo")})),document.addEventListener("click",(t=>{o.contains(t.target)||e.contains(t.target)||e.classList.remove("ativo")})),document.querySelectorAll(".menu-idiomas .seletor-idioma").forEach((o=>{o.addEventListener("click",(function(){const o=this.getAttribute("data-idioma");console.log("Idioma selecionado:",o),traduzirPagina(o),e.classList.remove("ativo")}))})),console.log("Seletor de idiomas configurado")):console.error("Elementos do seletor de idiomas n\xe3o encontrados")}function inicializarCarrosseis(){console.log("Inicializando carross\xe9is");const o=criarCarrossel({barraSeletor:".idioma-barra",btnAnteriorSeletor:".idiomas-carrossel .carrossel-btn.anterior",btnProximoSeletor:".idiomas-carrossel .carrossel-btn.proximo"}),e=criarCarrossel({barraSeletor:".skills-barra",btnAnteriorSeletor:".skills-carrossel .carrossel-btn.anterior",btnProximoSeletor:".skills-carrossel .carrossel-btn.proximo"});window.carrosseis.idiomas=o,window.carrosseis.skills=e,console.log("Carross\xe9is inicializados")}function criarCarrossel(o){console.log("Criando carrossel:",o.barraSeletor);const e=document.querySelectorAll(o.barraSeletor),t=document.querySelector(o.btnAnteriorSeletor),a=document.querySelector(o.btnProximoSeletor);let r=0;if(!e.length||!t||!a)return console.warn("Elementos do carrossel n\xe3o encontrados para:",o.barraSeletor),{mostrar:()=>{},getAtual:()=>0};function n(t){t<0&&(t=e.length-1),t>=e.length&&(t=0),r=t,e.forEach((o=>o.classList.remove("ativo"))),e[r].classList.add("ativo"),console.log(`Carrossel ${o.barraSeletor} mostrando \xedndice:`,r)}return t.addEventListener("click",(()=>{console.log(`Bot\xe3o anterior clicado em ${o.barraSeletor}`),n(r-1)})),a.addEventListener("click",(()=>{console.log(`Bot\xe3o pr\xf3ximo clicado em ${o.barraSeletor}`),n(r+1)})),{mostrar:n,getAtual:()=>r}}function configurarOutrosEventos(){console.log("Configurando outros eventos da UI"),domCache.sidebar&&domCache.sidebar.querySelectorAll("a").forEach((o=>{o.addEventListener("click",(e=>{e.preventDefault(),domCache.sidebar.classList.remove("open"),document.getElementById("sidebar-overlay")?.classList.remove("ativo"),domCache.sidebar.setAttribute("aria-hidden",!0),domCache.toggleButton.setAttribute("aria-expanded",!1),domCache.toggleButton.innerHTML='<span class="icone-menu">\u2630</span>',domCache.toggleButton.classList.remove("menu-aberto");const t=o.getAttribute("href").substring(1),a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}))}));const o=document.getElementById("btn-topo");o&&(window.addEventListener("scroll",(()=>{window.scrollY>200?o.classList.add("mostrar"):o.classList.remove("mostrar"),atualizarMenuAtivo()})),o.addEventListener("click",(function(o){o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})));const e=document.querySelector(".botao.fale-comigo");e&&e.addEventListener("click",(function(o){o.preventDefault();const e=document.getElementById("contato");e&&e.scrollIntoView({behavior:"smooth"})}));const t=document.querySelector(".sobre-mim-btn");t&&t.addEventListener("click",(function(o){o.preventDefault();const e=document.getElementById("sobre");e&&e.scrollIntoView({behavior:"smooth"})}));const a=document.querySelector('.header-icons .icon-link[href="#contato"]');a&&a.addEventListener("click",(function(o){o.preventDefault();const e=document.getElementById("contato");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}));const r=document.querySelector('.header-icons-bottom .icon-link[href="#contato"]');r&&r.addEventListener("click",(function(o){o.preventDefault();const e=document.getElementById("contato");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})),console.log("Outros eventos da UI configurados")}function atualizarMenuAtivo(){const o=document.querySelectorAll("section"),e=document.querySelectorAll(".sidebar a");o.forEach((o=>{const t=o.offsetTop-100,a=o.getAttribute("id");window.scrollY>=t&&e.forEach((o=>{o.classList.remove("ativo"),o.getAttribute("href")===`#${a}`&&o.classList.add("ativo")}))}))}function iniciarAnimacaoSections(){console.log("Iniciando anima\xe7\xe3o das se\xe7\xf5es");const o=document.querySelectorAll("section");console.log(`Encontradas ${o.length} se\xe7\xf5es para animar`);const e=()=>{o.forEach((o=>{o.classList.add("visivel"),console.log(`Se\xe7\xe3o ${o.id||"sem ID"} marcada como vis\xedvel`)}))};if(!("IntersectionObserver"in window)||0===o.length)return console.log("Usando fallback para anima\xe7\xe3o das se\xe7\xf5es"),void e();try{const e=new IntersectionObserver((o=>{o.forEach((o=>{o.isIntersecting&&(o.target.classList.add("visivel"),console.log(`Se\xe7\xe3o ${o.target.id||"sem ID"} tornou-se vis\xedvel`),e.unobserve(o.target))}))}),{threshold:.1,rootMargin:"50px"});o.forEach((o=>{e.observe(o),console.log(`Observando se\xe7\xe3o ${o.id||"sem ID"}`)}))}catch(o){console.error("Erro ao configurar o IntersectionObserver:",o),e()}console.log("Anima\xe7\xe3o das se\xe7\xf5es inicializada")}function inicializarPortfolio(){if(console.log("Inicializando cards do portf\xf3lio"),!domCache.portfolioContainer)return void console.error("Container do portf\xf3lio n\xe3o encontrado");"undefined"==typeof projetosPortfolio&&(console.log("Definindo array de projetos do portf\xf3lio"),window.projetosPortfolio={pt:[{id:"analise_vendas",titulo:"An\xe1lise de Vendas com Power BI",imagem:"img/vendas.jpg",alt:"Dashboard de vendas criado no Power BI mostrando gr\xe1ficos de faturamento, produtos e regi\xf5es",link:"https://github.com/mateus-mg/powerbi-vendas",descricao:"Dashboard interativo para an\xe1lise de vendas utilizando Power BI. Inclui segmenta\xe7\xe3o por per\xedodo, produtos e regi\xf5es, com insights visuais para tomada de decis\xe3o.",tecnologias:["Power BI","DAX","Visualiza\xe7\xe3o"]},{id:"previsao_casas",titulo:"Previs\xe3o de Pre\xe7os de Casas (Python)",imagem:"img/pre\xe7os-casas.jpg",alt:"Gr\xe1fico de dispers\xe3o de pre\xe7os de casas previsto por modelo de machine learning",link:"https://github.com/mateus-mg/house-prices-prediction",descricao:"Modelo de machine learning para prever pre\xe7os de casas com Python. Utiliza regress\xe3o, an\xe1lise explorat\xf3ria e valida\xe7\xe3o cruzada.",tecnologias:["Python","Pandas","Scikit-learn"]},{id:"dashboard_rh",titulo:"Dashboard de RH",imagem:"img/rh.jpg",alt:"Dashboard de RH com indicadores de turnover, absente\xedsmo e satisfa\xe7\xe3o dos colaboradores",link:"https://github.com/mateus-mg/dashboard-rh",descricao:"Visualiza\xe7\xe3o de indicadores de RH em dashboard din\xe2mico. Permite an\xe1lise de turnover, absente\xedsmo e satisfa\xe7\xe3o dos colaboradores.",tecnologias:["Power BI","Excel","RH"]}],en:[],es:[]});const o=AppState.idiomaProjetoAtual;if(!window.projetosPortfolio||!window.projetosPortfolio[o]||0===window.projetosPortfolio[o].length)return console.warn("Nenhum projeto encontrado para o idioma atual:",o),void(domCache.portfolioContainer.innerHTML='<p class="portfolio-sem-projetos">Nenhum projeto dispon\xedvel no momento.</p>');const e=()=>window.innerWidth<=768?1:window.innerWidth<=992?2:3;let t=e(),a=AppState.paginaAtualPortfolio||0;function r(o="avan\xe7ar",e="navegacao"){if(!AppState.emTransicaoPortfolio){AppState.setTransicaoPortfolio(!0);try{domCache.portfolioContainer.classList.add("portfolio-transitioning"),domCache.portfolioContainer.classList.add(`portfolio-transitioning-${o}`),"navegacao"===e&&domCache.portfolioContainer.classList.add("portfolio-navegacao-ativa"),domCache.portfolioContainer.style.opacity="0","navegacao"===e&&(domCache.portfolioContainer.style.transform="avan\xe7ar"===o?"translateX(-5%)":"translateX(5%)"),setTimeout((()=>{try{domCache.portfolioContainer.innerHTML="";const r=AppState.idiomaProjetoAtual,i=window.projetosPortfolio[r],s=a*t,c=Math.min(s+t,i.length),l=i.slice(s,c);console.log(`Renderizando ${l.length} projetos (p\xe1gina ${a+1})`),l.forEach((o=>{const e=document.createElement("div");e.className="portfolio-card",e.setAttribute("data-id",o.id);const t=o.tecnologias.map((o=>`<span class="portfolio-tag">${o}</span>`)).join(""),a=o.imagem.replace(/\.(jpg|jpeg|png|gif)$/,"").replace("img/","img/webp/")+".webp",r=o.imagem,n=0===l.indexOf(o)?"high":"low",i=0===l.indexOf(o)?"eager":"lazy";e.innerHTML=`\n                            <div class="portfolio-image-container">\n                                <picture>\n                                    <source \n                                        srcset="${a}"\n                                        type="image/webp"\n                                        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"\n                                        fetchpriority="${n}">\n                                    <img \n                                        src="${r}" \n                                        alt="${o.alt}" \n                                        loading="${i}" \n                                        fetchpriority="${n}"\n                                        width="600"\n                                        height="400"\n                                        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"\n                                        class="portfolio-img">\n                                </picture>\n                            </div>\n                            <div class="portfolio-card-content">\n                                <h3 class="portfolio-title">${o.titulo}</h3>\n                                <p class="portfolio-desc">${o.descricao}</p>\n                                <div class="portfolio-tags">\n                                    ${t}\n                                </div>\n                                <div class="portfolio-buttons">\n                                    <a href="${o.link}" target="_blank" rel="noopener noreferrer" class="portfolio-btn">\n                                        <i class="fas fa-external-link-alt"></i> Ver GitHub\n                                    </a>\n                                    <a href="projeto.html?id=${o.id}" class="portfolio-btn relatorio-btn">\n                                        <i class="fas fa-file-alt"></i> Relat\xf3rio\n                                    </a>\n                                </div>\n                            </div>\n                        `;const s=e.querySelector("img");s&&window.ImageManager&&window.ImageManager.aplicarRedimensionamentoResponsivo&&(s.complete?setTimeout((()=>window.ImageManager.aplicarRedimensionamentoResponsivo(s)),100):s.onload=function(){setTimeout((()=>window.ImageManager.aplicarRedimensionamentoResponsivo(this)),100)}),domCache.portfolioContainer.appendChild(e)})),domCache.portfolioContainer.classList.remove("portfolio-transitioning"),domCache.portfolioContainer.classList.remove(`portfolio-transitioning-${o}`),domCache.portfolioContainer.classList.add(`portfolio-entering-${o}`),domCache.portfolioContainer.style.transform="navegacao"===e?"avan\xe7ar"===o?"translateX(5%)":"translateX(-5%)":"translateX(0)",setTimeout((()=>{try{domCache.portfolioContainer.style.opacity="1",domCache.portfolioContainer.style.transform="translateX(0)",n(),setTimeout((()=>{try{domCache.portfolioContainer.classList.remove(`portfolio-entering-${o}`),domCache.portfolioContainer.classList.remove("portfolio-navegacao-ativa"),AppState.setTransicaoPortfolio(!1)}catch(o){console.error("Erro ao finalizar transi\xe7\xe3o:",o),AppState.setTransicaoPortfolio(!1)}}),400)}catch(o){console.error("Erro durante a transi\xe7\xe3o de entrada:",o),AppState.setTransicaoPortfolio(!1)}}),50)}catch(o){console.error("Erro durante a renderiza\xe7\xe3o dos cards:",o),domCache.portfolioContainer.style.opacity="1",AppState.setTransicaoPortfolio(!1),n()}}),400)}catch(o){console.error("Erro inicial na transi\xe7\xe3o:",o),AppState.setTransicaoPortfolio(!1)}}}function n(){const o=AppState.idiomaProjetoAtual,e=Math.ceil(window.projetosPortfolio[o].length/t),n=document.querySelector(".portfolio-navegacao");if(n&&n.remove(),e<=1)return;const i=document.createElement("div");i.className="portfolio-navegacao";const s=document.createElement("button");s.className="portfolio-nav-btn anterior",s.innerHTML='<i class="fas fa-chevron-left"></i> Anterior',s.disabled=0===a,s.addEventListener("click",(()=>{console.log("Bot\xe3o anterior do portf\xf3lio clicado"),a>0&&!AppState.emTransicaoPortfolio&&(a--,AppState.setPaginaPortfolio(a),r("voltar"))}));const c=document.createElement("button");c.className="portfolio-nav-btn proximo",c.innerHTML='Pr\xf3ximo <i class="fas fa-chevron-right"></i>',c.disabled=a>=e-1,c.addEventListener("click",(()=>{console.log("Bot\xe3o pr\xf3ximo do portf\xf3lio clicado"),a<e-1&&!AppState.emTransicaoPortfolio&&(a++,AppState.setPaginaPortfolio(a),r("avan\xe7ar"))})),i.appendChild(s),i.appendChild(c),domCache.portfolioContainer.parentNode.insertBefore(i,domCache.portfolioContainer.nextSibling)}AppState.emTransicaoPortfolio,window.addEventListener("resize",(()=>{const n=e();if(n!==t){t=n;const e=window.projetosPortfolio[o],i=Math.ceil(e.length/t);a>=i&&(a=Math.max(0,i-1),AppState.setPaginaPortfolio(a)),r("avan\xe7ar","redimensionamento")}})),PubSub.subscribe("idioma:alterado",(o=>{console.log(`Portfolio recebeu notifica\xe7\xe3o de altera\xe7\xe3o de idioma: ${o.antigo} -> ${o.novo}`),window.projetosPortfolio[o.novo]&&0!==window.projetosPortfolio[o.novo].length?(console.log(`Renderizando portfolio existente para o idioma ${o.novo}`),r("avan\xe7ar","idioma")):console.log(`Reinicializando portfolio para o idioma ${o.novo}`)})),r(),function(o){let e=0,n=0;o.addEventListener("touchstart",(o=>{e=o.changedTouches[0].screenX})),o.addEventListener("touchend",(o=>{n=o.changedTouches[0].screenX,n<e-50&&(()=>{const o=AppState.idiomaProjetoAtual,e=Math.ceil(window.projetosPortfolio[o].length/t);a<e-1&&!AppState.emTransicaoPortfolio&&(a++,AppState.setPaginaPortfolio(a),r("avan\xe7ar"))})(),n>e+50&&a>0&&!AppState.emTransicaoPortfolio&&(a--,AppState.setPaginaPortfolio(a),r("voltar"))}))}(domCache.portfolioContainer),window.renderizarPortfolio=r,console.log("Inicializa\xe7\xe3o do portf\xf3lio conclu\xedda")}function traduzirPagina(o){console.log("Traduzindo p\xe1gina para:",o),AppState.setIdiomaAtual(o);const e=`${CONFIG_CACHE.prefixoChave}traducao_${o}`,t=`${CONFIG_CACHE.prefixoChave}traducao_versao_${o}`,a=`${CONFIG_CACHE.prefixoChave}traducao_data_${o}`,r=localStorage.getItem(t),n=localStorage.getItem(a),i=localStorage.getItem(e),s=AppState.configCache;if(r===s.versao&&n&&Date.now()-parseInt(n)<s.tempoExpiracaoCache&&i){console.log(`Usando tradu\xe7\xf5es em cache para o idioma ${o} (vers\xe3o ${r})`);try{return void aplicarTraducoes(JSON.parse(i),o)}catch(o){console.error("Erro ao processar cache de tradu\xe7\xf5es:",o)}}console.log(`Buscando tradu\xe7\xf5es do servidor para o idioma ${o}`),fetch(`i18n/${o}.json`).then((o=>{if(!o.ok)throw new Error(`Erro ao carregar arquivo de tradu\xe7\xe3o: ${o.status}`);return o.json()})).then((r=>{console.log("Arquivo de tradu\xe7\xe3o carregado com sucesso:",o);try{localStorage.setItem(e,JSON.stringify(r)),localStorage.setItem(t,s.versao),localStorage.setItem(a,Date.now().toString()),console.log(`Tradu\xe7\xf5es para ${o} armazenadas em cache (vers\xe3o ${s.versao})`)}catch(o){console.error("Erro ao salvar tradu\xe7\xf5es em cache:",o),limparCacheAntigo()}aplicarTraducoes(r,o),AppState.adicionarIdiomaCarregado(o)})).catch((e=>{console.error("Erro ao traduzir a p\xe1gina:",e),alert(`Erro ao carregar as tradu\xe7\xf5es para ${o}. Por favor, tente novamente.`),PubSub.publish("idioma:erro",{idioma:o,erro:e.message})}))}function limparCacheAntigo(){console.log("Limpando cache antigo para liberar espa\xe7o");try{const o=[],e=`${CONFIG_CACHE.prefixoChave}traducao_`;for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);if(a&&a.startsWith(e)){const t=a.replace(e,"").split("_")[0],r=localStorage.getItem(`${CONFIG_CACHE.prefixoChave}traducao_data_${t}`);o.push({chave:a,idioma:t,data:r?parseInt(r):0})}}o.sort(((o,e)=>o.data-e.data));const t=Math.ceil(o.length/2);for(let e=0;e<t&&e<o.length;e++){const t=o[e];localStorage.removeItem(t.chave),localStorage.removeItem(`${CONFIG_CACHE.prefixoChave}traducao_versao_${t.idioma}`),localStorage.removeItem(`${CONFIG_CACHE.prefixoChave}traducao_data_${t.idioma}`),console.log(`Cache removido: ${t.chave}`)}console.log(`${t} itens de cache antigos removidos`)}catch(o){console.error("Erro ao limpar cache:",o)}}function aplicarTraducoes(o,e){document.title=o.tituloDocumento;const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",o.metaDescricao);const a=document.querySelectorAll("nav.sidebar a");a.length>0&&(a[0].textContent=o.nav.sobreMim,a[1].textContent=o.nav.experiencias,a[2].textContent=o.nav.portfolio,a[3].textContent=o.nav.servicos,a[4].textContent=o.nav.contato);const r=document.querySelector("header");if(r){const e=r.querySelectorAll("p");e.length>0&&(e[0].textContent=o.header.welcome,e.length>1&&(e[1].textContent=o.header.role));const t=r.querySelector("h1");t&&(t.textContent=o.header.name)}const n=document.querySelectorAll(".titulo-section");n.length>0&&(n[0].textContent=o.sobre,n.length>1&&(n[1].textContent=o.experiencias),n.length>2&&(n[2].textContent=o.portfolio),n.length>3&&(n[3].textContent=o.servicos),n.length>4&&(n[4].textContent=o.contato));const i=document.querySelector("#sobre .conteudo-section > p");i&&(i.textContent=o.sobre_descricao);const s=document.querySelector("#experiencias .conteudo-section > p");s&&(s.textContent=o.experiencias_descricao);const c=document.querySelector("#portfolio .conteudo-section > p");c&&(c.textContent=o.portfolio_descricao);const l=document.querySelector("#servicos .conteudo-section > p");l&&(l.textContent=o.servicos_descricao);const d=document.querySelector("#contato .conteudo-section > p");if(d&&(d.textContent=o.contato_descricao),document.querySelectorAll("[data-i18n-botao]").forEach((e=>{const t=e.getAttribute("data-i18n-botao"),a=t.split("."),r=a.length>1?a[a.length-1]:t;if(console.log(`Processando bot\xe3o com chave: ${t}, chaveBotao extra\xedda: ${r}`),o.botoes)if(void 0!==o.botoes[r])"object"==typeof o.botoes[r]&&null!==o.botoes[r]?o.botoes[r].traducao&&(e.innerHTML=o.botoes[r].traducao,console.log(`Bot\xe3o ${t} traduzido para: ${o.botoes[r].traducao} (formato objeto)`)):(e.innerHTML=o.botoes[r],console.log(`Bot\xe3o ${t} traduzido para: ${o.botoes[r]} (formato string)`));else{const a=Object.keys(o.botoes).find((o=>o.toLowerCase()===r.toLowerCase()));a?"object"==typeof o.botoes[a]&&null!==o.botoes[a]?(e.innerHTML=o.botoes[a].traducao||"",console.log(`Bot\xe3o ${t} traduzido usando case-insensitive match (formato objeto): ${a}`)):(e.innerHTML=o.botoes[a],console.log(`Bot\xe3o ${t} traduzido usando case-insensitive match (formato string): ${a}`)):console.warn(`Tradu\xe7\xe3o n\xe3o encontrada para o bot\xe3o: ${t}`)}else console.warn("Objeto 'botoes' n\xe3o encontrado nas tradu\xe7\xf5es.")})),document.querySelectorAll("[data-i18n]").forEach((e=>{const t=e.getAttribute("data-i18n"),a=t.split(".");let r=o;for(const o of a){if(!r||void 0===r[o]){console.warn(`Chave de tradu\xe7\xe3o n\xe3o encontrada: ${t}`),r=null;break}r=r[o]}null!==r&&"string"==typeof r?e.textContent=r:null!==r&&"object"==typeof r&&r.titulo&&(e.textContent=r.titulo)})),document.querySelectorAll('[data-i18n^="formulario."]').forEach((e=>{const t=e.getAttribute("data-i18n").split(".");if(t.length>=2){const a=t[1];o.formulario&&o.formulario[a]&&(e.textContent=o.formulario[a])}})),document.querySelectorAll('option[data-i18n^="formulario."]').forEach((e=>{const t=e.getAttribute("data-i18n").split(".");if(t.length>=2){const a=t[1];o.formulario&&o.formulario[a]&&(e.textContent=o.formulario[a])}})),document.querySelectorAll('[data-i18n^="servicos_cards."]').forEach((e=>{const t=e.getAttribute("data-i18n").split(".");if(t.length>=3){const a=t[1],r=t[2];o.servicos_cards&&o.servicos_cards[a]&&o.servicos_cards[a][r]&&(e.textContent=o.servicos_cards[a][r])}})),o.projetos){const t=[];Object.keys(o.projetos).forEach((e=>{const a=o.projetos[e];let r;r=e.includes("vendas")?"img/vendas.jpg":e.includes("previsao_casas")||e.includes("casas")?"img/pre\xe7os-casas.jpg":e.includes("rh")?"img/rh.jpg":`img/${e}.jpg`,t.push({id:e,titulo:a.titulo,imagem:r,alt:a.alt,link:`https://github.com/mateus-mg/${e}`,descricao:a.descricao,tecnologias:a.tecnologias})})),window.projetosPortfolio[e]=t,console.log(`${t.length} projetos carregados para o idioma ${e}`),window.renderizarPortfolio?(console.log("Renderizando portf\xf3lio ap\xf3s tradu\xe7\xe3o"),window.renderizarPortfolio("avan\xe7ar","navegacao")):(console.warn("Fun\xe7\xe3o renderizarPortfolio n\xe3o encontrada, reinicializando portf\xf3lio"),inicializarPortfolio())}else console.warn("Nenhum projeto encontrado para o idioma:",e);document.querySelectorAll(".seletor-idioma").forEach((o=>{o.getAttribute("data-idioma")===e?(o.classList.add("ativo"),console.log(`Bot\xe3o de idioma ${e} marcado como ativo`)):o.classList.remove("ativo")})),console.log("Tradu\xe7\xe3o conclu\xedda para:",e)}function configurarFormularioContato(){if(console.log("Configurando formul\xe1rio de contato"),!domCache.form)return void console.error("Formul\xe1rio de contato n\xe3o encontrado");const o=gerenciarFeedbackPopup(),e=document.getElementById("assunto");e&&e.addEventListener("change",(function(){const o=this.value,e=document.querySelector('input[name="_subject"]');e&&o&&(e.value=`${o}`,console.log("Assunto atualizado para:",e.value))}));const t=function(e,t,a=""){let r,n;return"enviando"===e?(r=`"${t}", Estamos enviando sua mensagem...`,n="Enviando Mensagem..."):(r=`<strong>Ol\xe1 ${t||"usu\xe1rio"}!</strong><br>\n                        Sua mensagem ${a?`sobre "<em>${a}</em>" `:""}foi enviada com sucesso!<br>\n                        Agradecemos seu contato e entraremos em contato o mais breve poss\xedvel.`,n="Mensagem Enviada!"),o.mostrar(r,n),r};if(domCache.form.addEventListener("submit",(async function(e){const a=document.getElementById("assunto").value,r=domCache.form.querySelector('input[name="_subject"]');r&&a&&(r.value=`${a}`);const n=document.getElementById("nome").value;localStorage.setItem("ultimo_contato_nome",n),localStorage.setItem("ultimo_assunto",a);try{const t=await o.mensagemEnviando(n),a=await o.obterTituloTraduzido("enviando");o.mostrar(t,a),e.preventDefault(),setTimeout((()=>{console.log("Enviando formul\xe1rio pelo m\xe9todo POST tradicional"),domCache.form.submit()}),3e3)}catch(o){console.error("Erro ao mostrar mensagem de envio:",o),e.preventDefault(),t("enviando",n),setTimeout((()=>domCache.form.submit()),3e3)}})),window.location.search.includes("enviado=sucesso")){const e=localStorage.getItem("ultimo_contato_nome"),a=localStorage.getItem("ultimo_assunto");!async function(){try{const t=await o.mensagemEnvio(e,a),r=await o.obterTituloTraduzido("titulo");o.mostrar(t,r)}catch(o){console.error("Erro ao mostrar mensagem de sucesso:",o),t("sucesso",e,a)}}()}}function configurarEventosTeclado(){console.log("Configurando tratamento centralizado de teclas"),document.addEventListener("keydown",(o=>{"Escape"===o.key&&(domCache.sidebar&&domCache.sidebar.classList.contains("open")&&handlers.toggleSidebar(),domCache.menuIdiomas&&domCache.menuIdiomas.classList.remove("ativo"));const e=document.activeElement.closest(".idiomas-carrossel"),t=document.activeElement.closest(".skills-carrossel");if(e){const e=window.carrosseis?.idiomas;e&&("ArrowLeft"===o.key?(o.preventDefault(),e.mostrar(e.getAtual()-1)):"ArrowRight"===o.key&&(o.preventDefault(),e.mostrar(e.getAtual()+1)))}else if(t){const e=window.carrosseis?.skills;e&&("ArrowLeft"===o.key?(o.preventDefault(),e.mostrar(e.getAtual()-1)):"ArrowRight"===o.key&&(o.preventDefault(),e.mostrar(e.getAtual()+1)))}})),console.log("Tratamento centralizado de teclas configurado")}function gerenciarFeedbackPopup(){let o=document.getElementById("feedback-popup");if(!o){console.log("Criando popup de feedback"),o=document.createElement("div"),o.id="feedback-popup",o.className="feedback-popup",o.innerHTML='\n            <div class="feedback-content">\n                <div class="feedback-icon">\n                    <i class="fas fa-check-circle"></i>\n                </div>\n                <h3 class="feedback-titulo" data-i18n="formulario.feedback.titulo">Mensagem Enviada!</h3>\n                <p class="feedback-mensagem" data-i18n="formulario.feedback.mensagem">Sua mensagem foi recebida e ser\xe1 analisada com prioridade. Aguarde retorno em breve.</p>\n                <button class="botao feedback-fechar" data-i18n="formulario.feedback.fechar">Fechar</button>\n            </div>\n        ',document.body.appendChild(o);const t=o.querySelector(".feedback-fechar");t&&t.addEventListener("click",(()=>{e()}))}function e(){o.classList.remove("ativo"),setTimeout((()=>{if(o.style.display="none",window.location.search.includes("enviado=sucesso")){const o=window.location.pathname+window.location.hash;history.replaceState(null,"",o),console.log("Par\xe2metro 'enviado=sucesso' removido da URL")}}),300)}return{elemento:o,mostrar:function(e,t){if(e){const t=o.querySelector(".feedback-mensagem");t&&(t.innerHTML=e)}if(t){const e=o.querySelector(".feedback-titulo");e&&(e.textContent=t)}!function(){const e=localStorage.getItem("idioma")||"pt",t=`feedback_popup_${e}`,a=localStorage.getItem(t);if(a){const t=o.querySelector(".feedback-fechar");return t&&(t.textContent=a),void console.log(`Usando tradu\xe7\xe3o em cache para o bot\xe3o fechar (${e})`)}fetch(`i18n/${e}.json`).then((o=>o.json())).then((e=>{const a=o.querySelector(".feedback-fechar");a&&e.formulario?.feedback?.fechar&&(a.textContent=e.formulario.feedback.fechar,localStorage.setItem(t,e.formulario.feedback.fechar))})).catch((o=>{console.error(`Erro ao traduzir elementos do popup: ${o}`)}))}(),o.style.display="flex",o.offsetHeight,setTimeout((()=>{o.classList.add("ativo")}),10)},esconder:e,mensagemEnvio:function(o,e){const t=localStorage.getItem("idioma")||"pt";return o||(o=localStorage.getItem("ultimo_contato_nome")||"usu\xe1rio"),e||(e=localStorage.getItem("ultimo_assunto")||""),fetch(`i18n/${t}.json`).then((o=>o.json())).then((t=>e&&""!==e.trim()&&t.formulario?.feedback?.sucesso?t.formulario.feedback.sucesso.replace(/{{nome}}/g,o).replace(/{{assunto}}/g,e):t.formulario?.feedback?.sucesso_sem_assunto?t.formulario.feedback.sucesso_sem_assunto.replace(/{{nome}}/g,o):`\n                        <strong>Ol\xe1 ${o}!</strong><br>\n                        Sua mensagem ${e?`sobre "<em>${e}</em>" `:""}foi enviada com sucesso!<br>\n                        Agradecemos seu contato e entraremos em contato o mais breve poss\xedvel.\n                    `)).catch((t=>(console.error(`Erro ao buscar tradu\xe7\xf5es: ${t}`),`\n                    <strong>Ol\xe1 ${o}!</strong><br>\n                    Sua mensagem ${e?`sobre "<em>${e}</em>" `:""}foi enviada com sucesso!<br>\n                    Agradecemos seu contato e entraremos em contato o mais breve poss\xedvel.\n                `)))},mensagemEnviando:function(o){const e=localStorage.getItem("idioma")||"pt";return o||(o=localStorage.getItem("ultimo_contato_nome")||"usu\xe1rio"),fetch(`i18n/${e}.json`).then((o=>o.json())).then((e=>e.formulario?.feedback?.enviando?e.formulario.feedback.enviando.replace(/{{nome}}/g,o):`"${o}", Estamos enviando sua mensagem...`)).catch((e=>(console.error(`Erro ao buscar tradu\xe7\xf5es: ${e}`),`"${o}", Estamos enviando sua mensagem...`)))},obterTituloTraduzido:function(o="titulo"){const e=localStorage.getItem("idioma")||"pt";return fetch(`i18n/${e}.json`).then((o=>o.json())).then((e=>{const t="enviando"===o?"enviando_titulo":"titulo";return e.formulario?.feedback?.[t]?e.formulario.feedback[t]:"enviando"===o?"Enviando Mensagem...":"Mensagem Enviada!"})).catch((e=>(console.error(`Erro ao buscar tradu\xe7\xf5es para t\xedtulo: ${e}`),"enviando"===o?"Enviando Mensagem...":"Mensagem Enviada!")))}}}function mostrarErro(o){console.log("Mostrando mensagem de erro:",o);const e=document.querySelector(".projeto-conteudo"),t=document.getElementById("projeto-titulo");if(t&&(t.textContent="Erro"),e)e.innerHTML=`\n            <div class="projeto-erro">\n                <h2>Ocorreu um erro</h2>\n                <p>${o}</p>\n                <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n            </div>\n        `;else{const e=document.querySelector(".main-content");e&&(e.innerHTML=`\n                <h1 class="projeto-titulo-simples">Erro</h1>\n                <div class="projeto-conteudo">\n                    <div class="projeto-erro">\n                        <h2>Ocorreu um erro</h2>\n                        <p>${o}</p>\n                        <a href="index.html#portfolio" class="botao">Voltar ao Portf\xf3lio</a>\n                    </div>\n                </div>\n            `)}}function carregarDetalhes(o,e){console.log(`Carregando detalhes do projeto ${o} no idioma ${e}`);const t=(new Date).getTime();fetch(`i18n/${e}.json?v=${t}`).then((o=>{if(!o.ok)throw new Error(`Erro ao carregar arquivo de tradu\xe7\xe3o: ${o.status}`);return o.json()})).then((t=>{if(!t.projetos||!t.projetos[o])return void mostrarErro(`Projeto n\xe3o encontrado no idioma ${e}`);const a=t.projetos[o];document.title=`${a.titulo} - Mateus Galv\xe3o`;const r=document.getElementById("projeto-titulo");r&&(r.textContent=a.titulo);const n=document.getElementById("projeto-descricao-curta");n&&(n.textContent=a.descricao);const i=document.getElementById("projeto-descricao-longa");i&&(a.descricao_longa?(i.innerHTML=a.descricao_longa,i.style.display="block"):i.style.display="none");const s=document.querySelector(".tags-container");s&&a.tecnologias&&Array.isArray(a.tecnologias)&&(s.innerHTML=a.tecnologias.map((o=>`<span class="portfolio-tag">${o}</span>`)).join(""));const c=document.getElementById("projeto-relatorio");if(c){const o=c.querySelector(".relatorio-conteudo");o&&(a.relatorio?(o.innerHTML=a.relatorio,c.style.display="block"):(o.innerHTML="\n                            <p>Relat\xf3rio detalhado em desenvolvimento.</p>\n                            <p>Este projeto est\xe1 sendo documentado e em breve teremos informa\xe7\xf5es mais detalhadas sobre seu desenvolvimento, desafios enfrentados e solu\xe7\xf5es implementadas.</p>\n                        ",c.style.display="block"))}const l=document.querySelector(".github-btn");l&&(l.href=`https://github.com/mateus-mg/${o}`),atualizarMetaTags(a.titulo,a.descricao),void 0!==PubSub&&PubSub.publish("projeto:detalhesCarregados",{projetoId:o,idioma:e,titulo:a.titulo}),console.log("Detalhes do projeto carregados com sucesso")})).catch((t=>{console.error("Erro ao carregar detalhes do projeto:",t),mostrarErro(`Erro ao carregar as tradu\xe7\xf5es para ${e}. Por favor, tente novamente.`),void 0!==PubSub&&PubSub.publish("projeto:erroCarregamento",{projetoId:o,idioma:e,erro:t.message})}))}function atualizarMetaTags(o,e){const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",e);const a=document.querySelector('meta[property="og:title"]');a&&a.setAttribute("content",`${o} - Mateus Galv\xe3o`);const r=document.querySelector('meta[property="og:description"]');r&&r.setAttribute("content",e),console.log("Meta tags atualizadas para SEO")}document.addEventListener("DOMContentLoaded",(function(){if(console.log("Inicializando o site..."),initDOMCache(),!domCache.sidebar||!domCache.toggleButton)return void console.error("Elementos cr\xedticos n\xe3o encontrados");domCache.toggleButton.addEventListener("click",handlers.toggleSidebar),document.addEventListener("click",handlers.closeMenus),document.addEventListener("keydown",handlers.handleEscape),criarOverlaySidebar(),configurarEventosTeclado(),iniciarAnimacaoSections(),configurarSeletorIdiomas(),inicializarCarrosseis(),inicializarPortfolio(),configurarFormularioContato(),configurarOutrosEventos();const o=localStorage.getItem("idioma");o&&traduzirPagina(o),console.log("Inicializa\xe7\xe3o do site conclu\xedda")})),window.atualizarIconeSidebar=atualizarIconeSidebar,document.addEventListener("DOMContentLoaded",(function(){const o=o=>{const e=document.getElementById(o);if(!e)return;const t=e.querySelectorAll(".experiencia-pagina"),a=t.length,r=document.querySelector(`.experiencia-nav-btn.anterior[data-target="${o}"]`),n=document.querySelector(`.experiencia-nav-btn.proximo[data-target="${o}"]`);let i=1;t.forEach(((o,e)=>{0===e?(o.classList.add("ativo"),o.style.display="block",o.style.opacity="1",o.style.transform="translateX(0)"):(o.classList.remove("ativo"),o.style.display="none",o.style.opacity="0")}));const s=()=>{r&&(r.disabled=1===i),n&&(n.disabled=i===a)},c=o=>{if(o<1||o>a||o===i)return;const t=o>i?"proximo":"anterior",r=e.querySelector(`.experiencia-pagina[data-pagina="${i}"]`),n=e.querySelector(`.experiencia-pagina[data-pagina="${o}"]`);r&&n&&(r.style.opacity="0",r.style.transform="proximo"===t?"translateX(-30px)":"translateX(30px)",setTimeout((()=>{r.classList.remove("ativo"),r.style.display="none",n.style.display="block",n.style.opacity="0",n.style.transform="proximo"===t?"translateX(30px)":"translateX(-30px)",n.offsetWidth,n.style.opacity="1",n.style.transform="translateX(0)",i=o,s(),n.classList.add("ativo")}),300))};r&&r.addEventListener("click",(()=>{c(i-1)})),n&&n.addEventListener("click",(()=>{c(i+1)})),s()};o("formacoes-container"),o("cursos-container")})),document.addEventListener("DOMContentLoaded",(function(){console.log("Inicializando p\xe1gina de detalhes do projeto");try{const o=new URLSearchParams(window.location.search||"").get("id");if(!o)return console.error("ID do projeto n\xe3o encontrado na URL"),void mostrarErro("Nenhum projeto especificado");console.log(`Carregando detalhes do projeto: ${o}`);let e="pt";try{if(void 0!==window.AppState&&null!==window.AppState)e=window.AppState.idiomaAtual||"pt",console.log("Utilizando idioma do AppState:",e);else{const o=localStorage.getItem("idioma"),t=sessionStorage.getItem("idioma");e=o||t||"pt",console.log("AppState n\xe3o dispon\xedvel, usando idioma de armazenamento local:",e)}}catch(o){console.error("Erro ao obter o idioma:",o)}const t=document.querySelector(".idioma-atual");t&&(t.textContent=e.toUpperCase()),document.querySelectorAll(".seletor-idioma").forEach((o=>{o.classList.remove("ativo"),o.getAttribute("data-idioma")===e&&o.classList.add("ativo")})),carregarDetalhes(o,e)}catch(o){console.error("Erro na inicializa\xe7\xe3o da p\xe1gina de detalhes:",o),mostrarErro("Ocorreu um erro ao carregar a p\xe1gina de detalhes")}const o=document.querySelector(".menu-idiomas-toggle"),e=document.querySelector(".menu-idiomas");o&&e&&(o.addEventListener("click",(function(){e.classList.toggle("ativo");const t=e.classList.contains("ativo");o.setAttribute("aria-expanded",t)})),document.addEventListener("click",(function(t){o.contains(t.target)||e.contains(t.target)||(e.classList.remove("ativo"),o.setAttribute("aria-expanded","false"))})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.classList.contains("ativo")&&(e.classList.remove("ativo"),o.setAttribute("aria-expanded","false"))}))),document.querySelectorAll(".seletor-idioma").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-idioma"),a=new URLSearchParams(window.location.search).get("id");try{null!=AppState?(AppState.setIdiomaAtual(t),console.log("Idioma atualizado via AppState:",t)):(localStorage.setItem("idioma",t),sessionStorage.setItem("idioma",t),console.log("Idioma salvo em localStorage/sessionStorage:",t))}catch(o){console.error("Erro ao atualizar idioma:",o)}a?carregarDetalhes(a,t):console.warn("N\xe3o foi poss\xedvel recarregar detalhes: ID de projeto n\xe3o encontrado"),document.querySelectorAll(".seletor-idioma").forEach((o=>{o.classList.remove("ativo")})),this.classList.add("ativo");const r=document.querySelector(".idioma-atual");r&&(r.textContent=t.toUpperCase()),e&&e.classList.remove("ativo"),o&&o.setAttribute("aria-expanded","false")}))}));try{null!=PubSub&&PubSub.subscribe("idioma:alterado",(function(o){console.log(`P\xe1gina de detalhes recebeu notifica\xe7\xe3o de altera\xe7\xe3o de idioma: ${o.antigo} -> ${o.novo}`);const e=new URLSearchParams(window.location.search).get("id"),t=document.querySelector(".seletor-idioma.ativo")?.getAttribute("data-idioma");if(o.novo!==t){const t=document.querySelector(".idioma-atual");t&&(t.textContent=o.novo.toUpperCase()),document.querySelectorAll(".seletor-idioma").forEach((e=>{e.classList.remove("ativo"),e.getAttribute("data-idioma")===o.novo&&e.classList.add("ativo")})),e?carregarDetalhes(e,o.novo):console.warn("N\xe3o foi poss\xedvel recarregar detalhes: ID de projeto n\xe3o encontrado")}}))}catch(o){console.error("Erro ao configurar inscri\xe7\xe3o PubSub:",o)}const t=document.getElementById("btn-topo");t&&(window.addEventListener("scroll",(function(){window.scrollY>200?t.classList.add("mostrar"):t.classList.remove("mostrar")})),t.addEventListener("click",(function(o){o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})))})),document.addEventListener("DOMContentLoaded",(function(){fetch("js/seo.json").then((o=>{if(!o.ok)throw new Error("Falha ao carregar dados SEO");return o.json()})).then((o=>{const e=document.createElement("script");e.type="application/ld+json",e.textContent=JSON.stringify(o),document.head.appendChild(e),console.log("Dados de SEO carregados com sucesso")})).catch((o=>{console.error("Erro ao carregar dados SEO JSON-LD:",o),fetch("js/seo.json",{headers:{Accept:"text/plain"}}).then((o=>o.text())).then((o=>{try{const e=JSON.parse(o),t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(e),document.head.appendChild(t),console.log("Dados de SEO carregados via fallback")}catch(o){console.error("Erro no fallback:",o)}}))}))}));